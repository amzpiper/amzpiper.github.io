<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€ | ç§äººçŸ¥è¯†å›¾ä¹¦é¦†</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="åŒ…å«: Java åŸºç¡€, Java éƒ¨åˆ†æºç , JVM, Spring, Spring Boot, Spring Cloud, æ•°æ®åº“åŸç†, MySQL, ElasticSearch, MongoDB, Docker, k8s, CI&amp;CD, Linux, DevOps, åˆ†å¸ƒå¼, ä¸­é—´ä»¶, å¼€å‘å·¥å…·, Git, IDE, æºç é˜…è¯»ï¼Œè¯»ä¹¦ç¬”è®°, å¼€æºé¡¹ç›®...">
    <meta name="robots" content="all">
    <meta name="author" content="pdai">
    <meta name="keywords" content="ç§äººçŸ¥è¯†å›¾ä¹¦é¦†, javaä½“ç³», javaçŸ¥è¯†ä½“ç³», javaæ¡†æ¶,javaè¯¦è§£,javaå­¦ä¹ è·¯çº¿,java spring, javaé¢è¯•, çŸ¥è¯†ä½“ç³», javaæŠ€æœ¯ä½“ç³», javaç¼–ç¨‹, javaç¼–ç¨‹æŒ‡å—,javaå¼€å‘ä½“ç³», javaå¼€å‘,javaæ•™ç¨‹,java,javaæ•°æ®ç»“æ„, ç®—æ³•, å¼€å‘åŸºç¡€">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <link rel="preload" href="/assets/css/0.styles.cb877f3d.css" as="style"><link rel="preload" href="/assets/js/app.27f0b381.js" as="script"><link rel="preload" href="/assets/js/5.ea3a467f.js" as="script"><link rel="preload" href="/assets/js/25.32e88dc5.js" as="script"><link rel="prefetch" href="/assets/js/10.f7d3d75e.js"><link rel="prefetch" href="/assets/js/11.3f596b90.js"><link rel="prefetch" href="/assets/js/12.725de989.js"><link rel="prefetch" href="/assets/js/13.d6271850.js"><link rel="prefetch" href="/assets/js/14.c1a9019c.js"><link rel="prefetch" href="/assets/js/15.9c9ef26c.js"><link rel="prefetch" href="/assets/js/16.de77b749.js"><link rel="prefetch" href="/assets/js/17.423d042c.js"><link rel="prefetch" href="/assets/js/18.65db727f.js"><link rel="prefetch" href="/assets/js/19.f0cab2cf.js"><link rel="prefetch" href="/assets/js/2.2c55f875.js"><link rel="prefetch" href="/assets/js/20.bc2a1ebe.js"><link rel="prefetch" href="/assets/js/21.9d44366f.js"><link rel="prefetch" href="/assets/js/22.7d11e992.js"><link rel="prefetch" href="/assets/js/23.a2b338c4.js"><link rel="prefetch" href="/assets/js/24.b020e663.js"><link rel="prefetch" href="/assets/js/26.d6cf3bce.js"><link rel="prefetch" href="/assets/js/27.304e0d0a.js"><link rel="prefetch" href="/assets/js/28.12e94d0e.js"><link rel="prefetch" href="/assets/js/29.79c71861.js"><link rel="prefetch" href="/assets/js/3.afbede00.js"><link rel="prefetch" href="/assets/js/30.90aec520.js"><link rel="prefetch" href="/assets/js/31.248dcef9.js"><link rel="prefetch" href="/assets/js/32.abc6c660.js"><link rel="prefetch" href="/assets/js/33.90c0c365.js"><link rel="prefetch" href="/assets/js/4.1fed06c3.js"><link rel="prefetch" href="/assets/js/6.ee3d35d1.js"><link rel="prefetch" href="/assets/js/7.702fcf9c.js"><link rel="prefetch" href="/assets/js/8.15f570fb.js"><link rel="prefetch" href="/assets/js/9.bbacd143.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cb877f3d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/favicon.ico" alt="ç§äººçŸ¥è¯†å›¾ä¹¦é¦†" class="logo"> <span class="site-name can-hide">ç§äººçŸ¥è¯†å›¾ä¹¦é¦†</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  æ¦‚è¿°
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å­¦ä¹ ç¬”è®°" class="dropdown-title"><span class="title">å­¦ä¹ ç¬”è®°</span> <span class="arrow down"></span></button> <button type="button" aria-label="å­¦ä¹ ç¬”è®°" class="mobile-dropdown-title"><span class="title">å­¦ä¹ ç¬”è®°</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          å‰ç«¯
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/learn/learn-typescript.html" class="nav-link">
  Typescript
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/ChromeExtensions.html" class="nav-link">
  ChromeExtensions
</a></li></ul></li><li class="dropdown-item"><h4>
          Java
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/learn/Java8-Stream.html" class="nav-link">
  Stream
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/Java8-Optional.html" class="nav-link">
  Optional
</a></li></ul></li><li class="dropdown-item"><h4>
          Javaé«˜å¹¶å‘
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/learn/Javaçº¿ç¨‹æ± .html" class="nav-link">
  Javaçº¿ç¨‹æ± 
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/é«˜å¹¶å‘-çŸ¥è¯†ä½“ç³».html" class="nav-link">
  é«˜å¹¶å‘-çŸ¥è¯†ä½“ç³»
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html" class="nav-link">
  é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/é«˜å¹¶å‘-ç†è®ºåŸºç¡€.html" class="nav-link">
  é«˜å¹¶å‘-ç†è®ºåŸºç¡€
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/å…³é”®å­—-synchronized.html" class="nav-link">
  å…³é”®å­—-synchronized
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/å…³é”®å­—-volatile.html" class="nav-link">
  å…³é”®å­—-volatile
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/å…³é”®å­—-final.html" class="nav-link">
  å…³é”®å­—-final
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/é«˜å¹¶å‘-ThreadLocalè¯¦è§£.html" class="nav-link">
  é«˜å¹¶å‘-ThreadLocalè¯¦è§£
</a></li></ul></li><li class="dropdown-item"><h4>
          æ¡†æ¶
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/learn/Springç¬”è®°.html" class="nav-link">
  Springç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/Spring-MVCç¬”è®°.html" class="nav-link">
  SpringMVCç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/Mybatisç¬”è®°.html" class="nav-link">
  Mybatisç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/MybatisPlusç¬”è®°.html" class="nav-link">
  MybatisPlusç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/Springç¬”è®°.html" class="nav-link">
  SpringBootç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/Dubboå­¦ä¹ ç¬”è®°.html" class="nav-link">
  Dubboç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/learn-zookeeper.html" class="nav-link">
  Zookeeperç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/learn-redis.html" class="nav-link">
  Redisç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/learn-elasticstack.html" class="nav-link">
  Elasticstackç¬”è®°
</a></li></ul></li><li class="dropdown-item"><h4>
          JVM
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/learn/JVMå¿«é€Ÿå…¥é—¨ç¯‡.html" class="nav-link">
  JVMå¿«é€Ÿå…¥é—¨ç¯‡
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ–¹æ³•è®º" class="dropdown-title"><span class="title">æ–¹æ³•è®º</span> <span class="arrow down"></span></button> <button type="button" aria-label="æ–¹æ³•è®º" class="mobile-dropdown-title"><span class="title">æ–¹æ³•è®º</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/md/java/method/è®¾è®¡æ¨¡å¼.html" class="nav-link">
  è®¾è®¡æ¨¡å¼
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç‰ˆæœ¬å·¥å…·" class="dropdown-title"><span class="title">ç‰ˆæœ¬å·¥å…·</span> <span class="arrow down"></span></button> <button type="button" aria-label="ç‰ˆæœ¬å·¥å…·" class="mobile-dropdown-title"><span class="title">ç‰ˆæœ¬å·¥å…·</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/md/java/tool/Git.html" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/md/java/tool/Mavenå­¦ä¹ ç¬”è®°.html" class="nav-link">
  Maven
</a></li></ul></div></div><div class="nav-item"><a href="/md/about/about-me.html" class="nav-link">
  å…³äº
</a></div><div class="nav-item"><a href="https://github.com/amzpiper" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  æ¦‚è¿°
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å­¦ä¹ ç¬”è®°" class="dropdown-title"><span class="title">å­¦ä¹ ç¬”è®°</span> <span class="arrow down"></span></button> <button type="button" aria-label="å­¦ä¹ ç¬”è®°" class="mobile-dropdown-title"><span class="title">å­¦ä¹ ç¬”è®°</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          å‰ç«¯
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/learn/learn-typescript.html" class="nav-link">
  Typescript
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/ChromeExtensions.html" class="nav-link">
  ChromeExtensions
</a></li></ul></li><li class="dropdown-item"><h4>
          Java
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/learn/Java8-Stream.html" class="nav-link">
  Stream
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/Java8-Optional.html" class="nav-link">
  Optional
</a></li></ul></li><li class="dropdown-item"><h4>
          Javaé«˜å¹¶å‘
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/learn/Javaçº¿ç¨‹æ± .html" class="nav-link">
  Javaçº¿ç¨‹æ± 
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/é«˜å¹¶å‘-çŸ¥è¯†ä½“ç³».html" class="nav-link">
  é«˜å¹¶å‘-çŸ¥è¯†ä½“ç³»
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html" class="nav-link">
  é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/é«˜å¹¶å‘-ç†è®ºåŸºç¡€.html" class="nav-link">
  é«˜å¹¶å‘-ç†è®ºåŸºç¡€
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/å…³é”®å­—-synchronized.html" class="nav-link">
  å…³é”®å­—-synchronized
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/å…³é”®å­—-volatile.html" class="nav-link">
  å…³é”®å­—-volatile
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/å…³é”®å­—-final.html" class="nav-link">
  å…³é”®å­—-final
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/é«˜å¹¶å‘-ThreadLocalè¯¦è§£.html" class="nav-link">
  é«˜å¹¶å‘-ThreadLocalè¯¦è§£
</a></li></ul></li><li class="dropdown-item"><h4>
          æ¡†æ¶
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/learn/Springç¬”è®°.html" class="nav-link">
  Springç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/Spring-MVCç¬”è®°.html" class="nav-link">
  SpringMVCç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/Mybatisç¬”è®°.html" class="nav-link">
  Mybatisç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/MybatisPlusç¬”è®°.html" class="nav-link">
  MybatisPlusç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/Springç¬”è®°.html" class="nav-link">
  SpringBootç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/Dubboå­¦ä¹ ç¬”è®°.html" class="nav-link">
  Dubboç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/learn-zookeeper.html" class="nav-link">
  Zookeeperç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/learn-redis.html" class="nav-link">
  Redisç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/learn-elasticstack.html" class="nav-link">
  Elasticstackç¬”è®°
</a></li></ul></li><li class="dropdown-item"><h4>
          JVM
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/learn/JVMå¿«é€Ÿå…¥é—¨ç¯‡.html" class="nav-link">
  JVMå¿«é€Ÿå…¥é—¨ç¯‡
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ–¹æ³•è®º" class="dropdown-title"><span class="title">æ–¹æ³•è®º</span> <span class="arrow down"></span></button> <button type="button" aria-label="æ–¹æ³•è®º" class="mobile-dropdown-title"><span class="title">æ–¹æ³•è®º</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/md/java/method/è®¾è®¡æ¨¡å¼.html" class="nav-link">
  è®¾è®¡æ¨¡å¼
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç‰ˆæœ¬å·¥å…·" class="dropdown-title"><span class="title">ç‰ˆæœ¬å·¥å…·</span> <span class="arrow down"></span></button> <button type="button" aria-label="ç‰ˆæœ¬å·¥å…·" class="mobile-dropdown-title"><span class="title">ç‰ˆæœ¬å·¥å…·</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/md/java/tool/Git.html" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/md/java/tool/Mavenå­¦ä¹ ç¬”è®°.html" class="nav-link">
  Maven
</a></li></ul></div></div><div class="nav-item"><a href="/md/about/about-me.html" class="nav-link">
  å…³äº
</a></div><div class="nav-item"><a href="https://github.com/amzpiper" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>å‰ç«¯</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/md/java/learn/learn-typescript.html" class="sidebar-link">TypeScript</a></li><li><a href="/md/java/learn/ChromeExtensions.html" class="sidebar-link">Chrome Extensions</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Java</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/md/java/learn/Java8-Stream.html" class="sidebar-link">Java 8 - Stream</a></li><li><a href="/md/java/learn/Java8-Optional.html" class="sidebar-link">Java 8 - Optional</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Javaé«˜å¹¶å‘</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/md/java/learn/Javaçº¿ç¨‹æ± .html" class="sidebar-link">Java çº¿ç¨‹æ± </a></li><li><a href="/md/java/learn/é«˜å¹¶å‘-çŸ¥è¯†ä½“ç³».html" class="sidebar-link">é«˜å¹¶å‘-çŸ¥è¯†ä½“ç³»</a></li><li><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html" class="active sidebar-link">é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html#å¸¦ç€batå¤§å‚çš„é¢è¯•é—®é¢˜å»ç†è§£" class="sidebar-link">å¸¦ç€BATå¤§å‚çš„é¢è¯•é—®é¢˜å»ç†è§£</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html#çº¿ç¨‹çŠ¶æ€è½¬æ¢" class="sidebar-link">çº¿ç¨‹çŠ¶æ€è½¬æ¢</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html#_1-æ–°å»º-new" class="sidebar-link">1.æ–°å»º(New)</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html#_2-å¯è¿è¡Œ-runnable" class="sidebar-link">2.å¯è¿è¡Œ(Runnable)</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html#_3-é˜»å¡-blocking" class="sidebar-link">3.é˜»å¡(Blocking)</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html#_4-æ— é™æœŸç­‰å¾…-waiting" class="sidebar-link">4.æ— é™æœŸç­‰å¾…(Waiting)</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html#_5-é™æœŸç­‰å¾…-timed-waiting" class="sidebar-link">5.é™æœŸç­‰å¾…(Timed Waiting)</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html#_6-æ­»äº¡-terminated" class="sidebar-link">6.æ­»äº¡(Terminated)</a></li></ul></li><li class="sidebar-sub-header"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html#çº¿ç¨‹ä½¿ç”¨æ–¹å¼" class="sidebar-link">çº¿ç¨‹ä½¿ç”¨æ–¹å¼</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html#æ–¹å¼1-å®ç°-runnable-æ¥å£" class="sidebar-link">æ–¹å¼1: å®ç° Runnable æ¥å£</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html#æ–¹å¼2-å®ç°-callable-æ¥å£" class="sidebar-link">æ–¹å¼2: å®ç° Callable æ¥å£</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html#æ–¹å¼3-ç»§æ‰¿-thread-ç±»" class="sidebar-link">æ–¹å¼3: ç»§æ‰¿ Thread ç±»</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html#å¯¹æ¯”-å®ç°æ¥å£-vs-ç»§æ‰¿-thread" class="sidebar-link">å¯¹æ¯”: å®ç°æ¥å£ VS ç»§æ‰¿ Thread</a></li></ul></li><li class="sidebar-sub-header"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html#åŸºç¡€çº¿ç¨‹æœºåˆ¶" class="sidebar-link">åŸºç¡€çº¿ç¨‹æœºåˆ¶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html#executor" class="sidebar-link">Executor</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html#daemon" class="sidebar-link">Daemon</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html#sleep" class="sidebar-link">sleep()</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html#yield" class="sidebar-link">yield()</a></li></ul></li><li class="sidebar-sub-header"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html#çº¿ç¨‹ä¸­æ–­" class="sidebar-link">çº¿ç¨‹ä¸­æ–­</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html#interruptedexception" class="sidebar-link">InterruptedException</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html#interrupted" class="sidebar-link">interrupted()</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html#executor-çš„ä¸­æ–­æ“ä½œ" class="sidebar-link">Executor çš„ä¸­æ–­æ“ä½œ</a></li></ul></li><li class="sidebar-sub-header"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html#çº¿ç¨‹äº’æ–¥åŒæ­¥" class="sidebar-link">çº¿ç¨‹äº’æ–¥åŒæ­¥</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html#synchronized" class="sidebar-link">synchronized</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html#reentrantlock" class="sidebar-link">ReentrantLock</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html#æ¯”è¾ƒ" class="sidebar-link">æ¯”è¾ƒ</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html#ä½¿ç”¨æ¨èé€‰æ‹©" class="sidebar-link">ä½¿ç”¨æ¨èé€‰æ‹©</a></li></ul></li><li class="sidebar-sub-header"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html#çº¿ç¨‹ä¹‹é—´çš„åä½œ" class="sidebar-link">çº¿ç¨‹ä¹‹é—´çš„åä½œ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html#join" class="sidebar-link">join()</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html#wait-notify-notifyall" class="sidebar-link">wait() notify() notifyAll()</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html#await-signal-signalall" class="sidebar-link">await() signal() signalAll()</a></li></ul></li></ul></li><li><a href="/md/java/learn/é«˜å¹¶å‘-ç†è®ºåŸºç¡€.html" class="sidebar-link">é«˜å¹¶å‘-ç†è®ºåŸºç¡€</a></li><li><a href="/md/java/learn/å…³é”®å­—-synchronized.html" class="sidebar-link">å…³é”®å­—-synchronized</a></li><li><a href="/md/java/learn/å…³é”®å­—-volatile.html" class="sidebar-link">å…³é”®å­—-volatile</a></li><li><a href="/md/java/learn/å…³é”®å­—-final.html" class="sidebar-link">å…³é”®å­—-final</a></li><li><a href="/md/java/learn/é«˜å¹¶å‘-ThreadLocalè¯¦è§£.html" class="sidebar-link">é«˜å¹¶å‘ - ThreadLocalè¯¦è§£</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>æ¡†æ¶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/md/java/learn/Springç¬”è®°.html" class="sidebar-link">Spring</a></li><li><a href="/md/java/learn/Spring-MVCç¬”è®°.html" class="sidebar-link">SpringMVC</a></li><li><a href="/md/java/learn/Mybatisç¬”è®°.html" class="sidebar-link">Mybatis</a></li><li><a href="/md/java/learn/MybatisPlusç¬”è®°.html" class="sidebar-link">Mybatis-Plus</a></li><li><a href="/md/java/learn/SpringBootç¬”è®°.html" class="sidebar-link">SpringBoot</a></li><li><a href="/md/java/learn/learn-zookeeper.html" class="sidebar-link">Zookeeper</a></li><li><a href="/md/java/learn/learn-redis.html" class="sidebar-link">Redis</a></li><li><a href="/md/java/learn/learn-elasticstack.html" class="sidebar-link">Elasticstack</a></li><li><a href="/md/java/learn/Dubboå­¦ä¹ ç¬”è®°.html" class="sidebar-link">Dubbo</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JVM</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/md/java/learn/JVMå¿«é€Ÿå…¥é—¨ç¯‡.html" class="sidebar-link">JVMå¿«é€Ÿå…¥é—¨ç¯‡</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€"><a href="#é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€" class="header-anchor">#</a> é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€</h1> <aside>
ğŸ’¡ æœ¬æ–‡ä¸»è¦æ¦‚è¦æ€§çš„ä»‹ç»çº¿ç¨‹çš„åŸºç¡€ï¼Œä¸ºåé¢çš„ç« èŠ‚æ·±å…¥ä»‹ç»Javaå¹¶å‘çš„çŸ¥è¯†æä¾›åŸºç¡€ã€‚
</aside> <h2 id="å¸¦ç€batå¤§å‚çš„é¢è¯•é—®é¢˜å»ç†è§£"><a href="#å¸¦ç€batå¤§å‚çš„é¢è¯•é—®é¢˜å»ç†è§£" class="header-anchor">#</a> å¸¦ç€BATå¤§å‚çš„é¢è¯•é—®é¢˜å»ç†è§£</h2> <blockquote><p>è¯·å¸¦ç€è¿™äº›é—®é¢˜ç»§ç»­åæ–‡ï¼Œä¼šå¾ˆå¤§ç¨‹åº¦ä¸Šå¸®åŠ©ä½ æ›´å¥½çš„ç†è§£çº¿ç¨‹åŸºç¡€ã€‚@pdai</p></blockquote> <ul><li>çº¿ç¨‹æœ‰å“ªå‡ ç§çŠ¶æ€? åˆ†åˆ«è¯´æ˜ä»ä¸€ç§çŠ¶æ€åˆ°å¦ä¸€ç§çŠ¶æ€è½¬å˜æœ‰å“ªäº›æ–¹å¼?</li> <li>é€šå¸¸çº¿ç¨‹æœ‰å“ªå‡ ç§ä½¿ç”¨æ–¹å¼?</li> <li>åŸºç¡€çº¿ç¨‹æœºåˆ¶æœ‰å“ªäº›?</li> <li>çº¿ç¨‹çš„ä¸­æ–­æ–¹å¼æœ‰å“ªäº›?</li> <li>çº¿ç¨‹çš„äº’æ–¥åŒæ­¥æ–¹å¼æœ‰å“ªäº›? å¦‚ä½•æ¯”è¾ƒå’Œé€‰æ‹©?</li> <li>çº¿ç¨‹ä¹‹é—´æœ‰å“ªäº›åä½œæ–¹å¼?</li></ul> <h2 id="çº¿ç¨‹çŠ¶æ€è½¬æ¢"><a href="#çº¿ç¨‹çŠ¶æ€è½¬æ¢" class="header-anchor">#</a> çº¿ç¨‹çŠ¶æ€è½¬æ¢</h2> <p><img src="/assets/img/Untitled.4d53e42c.png" alt="Untitled"></p> <h3 id="_1-æ–°å»º-new"><a href="#_1-æ–°å»º-new" class="header-anchor">#</a> 1.æ–°å»º(New)</h3> <p>åˆ›å»ºåå°šæœªå¯åŠ¨ã€‚</p> <h3 id="_2-å¯è¿è¡Œ-runnable"><a href="#_2-å¯è¿è¡Œ-runnable" class="header-anchor">#</a> 2.å¯è¿è¡Œ(Runnable)</h3> <p>å¯èƒ½æ­£åœ¨è¿è¡Œï¼Œä¹Ÿå¯èƒ½æ­£åœ¨ç­‰å¾… CPU æ—¶é—´ç‰‡ã€‚</p> <p>åŒ…å«äº†æ“ä½œç³»ç»Ÿçº¿ç¨‹çŠ¶æ€ä¸­çš„ Running å’Œ Readyã€‚</p> <h3 id="_3-é˜»å¡-blocking"><a href="#_3-é˜»å¡-blocking" class="header-anchor">#</a> 3.é˜»å¡(Blocking)</h3> <p>ç­‰å¾…è·å–ä¸€ä¸ªæ’å®ƒé”ï¼Œå¦‚æœå…¶çº¿ç¨‹é‡Šæ”¾äº†é”å°±ä¼šç»“æŸæ­¤çŠ¶æ€ã€‚</p> <h3 id="_4-æ— é™æœŸç­‰å¾…-waiting"><a href="#_4-æ— é™æœŸç­‰å¾…-waiting" class="header-anchor">#</a> 4.æ— é™æœŸç­‰å¾…(Waiting)</h3> <p>ç­‰å¾…å…¶å®ƒçº¿ç¨‹æ˜¾å¼åœ°å”¤é†’ï¼Œå¦åˆ™ä¸ä¼šè¢«åˆ†é… CPU æ—¶é—´ç‰‡ã€‚</p> <p><a href="https://www.notion.so/d7d077704e8a45469fd9be91adb6afde" target="_blank" rel="noopener noreferrer">Untitled<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="_5-é™æœŸç­‰å¾…-timed-waiting"><a href="#_5-é™æœŸç­‰å¾…-timed-waiting" class="header-anchor">#</a> 5.é™æœŸç­‰å¾…(Timed Waiting)</h3> <p>æ— éœ€ç­‰å¾…å…¶å®ƒçº¿ç¨‹æ˜¾å¼åœ°å”¤é†’ï¼Œåœ¨ä¸€å®šæ—¶é—´ä¹‹åä¼šè¢«ç³»ç»Ÿè‡ªåŠ¨å”¤é†’ã€‚</p> <p>è°ƒç”¨ Thread.sleep() æ–¹æ³•ä½¿çº¿ç¨‹è¿›å…¥é™æœŸç­‰å¾…çŠ¶æ€æ—¶ï¼Œå¸¸å¸¸ç”¨â€œä½¿ä¸€ä¸ªçº¿ç¨‹ç¡çœ â€è¿›è¡Œæè¿°ã€‚</p> <p>è°ƒç”¨ Object.wait() æ–¹æ³•ä½¿çº¿ç¨‹è¿›å…¥é™æœŸç­‰å¾…æˆ–è€…æ— é™æœŸç­‰å¾…æ—¶ï¼Œå¸¸å¸¸ç”¨â€œæŒ‚èµ·ä¸€ä¸ªçº¿ç¨‹â€è¿›è¡Œæè¿°ã€‚</p> <p>ç¡çœ å’ŒæŒ‚èµ·æ˜¯ç”¨æ¥æè¿°è¡Œä¸ºï¼Œè€Œé˜»å¡å’Œç­‰å¾…ç”¨æ¥æè¿°çŠ¶æ€ã€‚</p> <p>é˜»å¡å’Œç­‰å¾…çš„åŒºåˆ«åœ¨äºï¼Œé˜»å¡æ˜¯è¢«åŠ¨çš„ï¼Œå®ƒæ˜¯åœ¨ç­‰å¾…è·å–ä¸€ä¸ªæ’å®ƒé”ã€‚è€Œç­‰å¾…æ˜¯ä¸»åŠ¨çš„ï¼Œé€šè¿‡è°ƒç”¨ Thread.sleep() å’Œ Object.wait() ç­‰æ–¹æ³•è¿›å…¥ã€‚</p> <p><a href="https://www.notion.so/bc3defbd113f49ecbb9f244e9e281e8c" target="_blank" rel="noopener noreferrer">Untitled<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="_6-æ­»äº¡-terminated"><a href="#_6-æ­»äº¡-terminated" class="header-anchor">#</a> 6.æ­»äº¡(Terminated)</h3> <p>å¯ä»¥æ˜¯çº¿ç¨‹ç»“æŸä»»åŠ¡ä¹‹åè‡ªå·±ç»“æŸï¼Œæˆ–è€…äº§ç”Ÿäº†å¼‚å¸¸è€Œç»“æŸã€‚</p> <h2 id="çº¿ç¨‹ä½¿ç”¨æ–¹å¼"><a href="#çº¿ç¨‹ä½¿ç”¨æ–¹å¼" class="header-anchor">#</a> çº¿ç¨‹ä½¿ç”¨æ–¹å¼</h2> <h3 id="æ–¹å¼1-å®ç°-runnable-æ¥å£"><a href="#æ–¹å¼1-å®ç°-runnable-æ¥å£" class="header-anchor">#</a> æ–¹å¼1: å®ç° Runnable æ¥å£</h3> <p>éœ€è¦å®ç° run() æ–¹æ³•ã€‚</p> <p>é€šè¿‡ Thread è°ƒç”¨ start() æ–¹æ³•æ¥å¯åŠ¨çº¿ç¨‹ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class MyRunnable implements Runnable {
    public void run() {
        // ...
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>public static void main(String[] args) {
    MyRunnable instance = new MyRunnable();
    Thread thread = new Thread(instance);
    thread.start();
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="æ–¹å¼2-å®ç°-callable-æ¥å£"><a href="#æ–¹å¼2-å®ç°-callable-æ¥å£" class="header-anchor">#</a> æ–¹å¼2: å®ç° Callable æ¥å£</h3> <p>ä¸ Runnable ç›¸æ¯”ï¼ŒCallable å¯ä»¥æœ‰è¿”å›å€¼ï¼Œè¿”å›å€¼é€šè¿‡ FutureTask è¿›è¡Œå°è£…ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class MyCallable implements Callable&lt;Integer&gt; {
    public Integer call() {
        return 123;
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>public static void main(String[] args) throws ExecutionException, InterruptedException {
    MyCallable mc = new MyCallable();
    FutureTask&lt;Integer&gt; ft = new FutureTask&lt;&gt;(mc);
    Thread thread = new Thread(ft);
    thread.start();
    System.out.println(ft.get());
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="æ–¹å¼3-ç»§æ‰¿-thread-ç±»"><a href="#æ–¹å¼3-ç»§æ‰¿-thread-ç±»" class="header-anchor">#</a> æ–¹å¼3: ç»§æ‰¿ Thread ç±»</h3> <p>åŒæ ·ä¹Ÿæ˜¯éœ€è¦å®ç° run() æ–¹æ³•ï¼Œå› ä¸º Thread ç±»ä¹Ÿå®ç°äº† Runable æ¥å£ã€‚</p> <p>å½“è°ƒç”¨ start() æ–¹æ³•å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹æ—¶ï¼Œè™šæ‹Ÿæœºä¼šå°†è¯¥çº¿ç¨‹æ”¾å…¥å°±ç»ªé˜Ÿåˆ—ä¸­ç­‰å¾…è¢«è°ƒåº¦ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è¢«è°ƒåº¦æ—¶ä¼šæ‰§è¡Œè¯¥çº¿ç¨‹çš„ run() æ–¹æ³•ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class MyThread extends Thread {
    public void run() {
        // ...
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>public static void main(String[] args) {
    MyThread mt = new MyThread();
    mt.start();
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="å¯¹æ¯”-å®ç°æ¥å£-vs-ç»§æ‰¿-thread"><a href="#å¯¹æ¯”-å®ç°æ¥å£-vs-ç»§æ‰¿-thread" class="header-anchor">#</a> å¯¹æ¯”: å®ç°æ¥å£ VS ç»§æ‰¿ Thread</h3> <p>å®ç°æ¥å£ä¼šæ›´å¥½ä¸€äº›ï¼Œå› ä¸º:</p> <ul><li>Java ä¸æ”¯æŒå¤šé‡ç»§æ‰¿ï¼Œå› æ­¤ç»§æ‰¿äº† Thread ç±»å°±æ— æ³•ç»§æ‰¿å…¶å®ƒç±»ï¼Œä½†æ˜¯å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼›</li> <li>ç±»å¯èƒ½åªè¦æ±‚å¯æ‰§è¡Œå°±è¡Œï¼Œç»§æ‰¿æ•´ä¸ª Thread ç±»å¼€é”€è¿‡å¤§ã€‚</li></ul> <h2 id="åŸºç¡€çº¿ç¨‹æœºåˆ¶"><a href="#åŸºç¡€çº¿ç¨‹æœºåˆ¶" class="header-anchor">#</a> åŸºç¡€çº¿ç¨‹æœºåˆ¶</h2> <h3 id="executor"><a href="#executor" class="header-anchor">#</a> Executor</h3> <p>Executor ç®¡ç†å¤šä¸ªå¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œï¼Œè€Œæ— éœ€ç¨‹åºå‘˜æ˜¾å¼åœ°ç®¡ç†çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸã€‚è¿™é‡Œçš„å¼‚æ­¥æ˜¯æŒ‡å¤šä¸ªä»»åŠ¡çš„æ‰§è¡Œäº’ä¸å¹²æ‰°ï¼Œä¸éœ€è¦è¿›è¡ŒåŒæ­¥æ“ä½œã€‚</p> <p>ä¸»è¦æœ‰ä¸‰ç§ Executor:</p> <ul><li>CachedThreadPool: ä¸€ä¸ªä»»åŠ¡åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼›</li> <li>FixedThreadPool: æ‰€æœ‰ä»»åŠ¡åªèƒ½ä½¿ç”¨å›ºå®šå¤§å°çš„çº¿ç¨‹ï¼›</li> <li>SingleThreadExecutor: ç›¸å½“äºå¤§å°ä¸º 1 çš„ FixedThreadPoolã€‚</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ExecutorService</span> executorService <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newCachedThreadPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        executorService<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyRunnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    executorService<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="daemon"><a href="#daemon" class="header-anchor">#</a> Daemon</h3> <p>å®ˆæŠ¤çº¿ç¨‹æ˜¯ç¨‹åºè¿è¡Œæ—¶åœ¨åå°æä¾›æœåŠ¡çš„çº¿ç¨‹ï¼Œä¸å±äºç¨‹åºä¸­ä¸å¯æˆ–ç¼ºçš„éƒ¨åˆ†ã€‚</p> <p>å½“æ‰€æœ‰éå®ˆæŠ¤çº¿ç¨‹ç»“æŸæ—¶ï¼Œç¨‹åºä¹Ÿå°±ç»ˆæ­¢ï¼ŒåŒæ—¶ä¼šæ€æ­»æ‰€æœ‰å®ˆæŠ¤çº¿ç¨‹ã€‚</p> <p>main() å±äºéå®ˆæŠ¤çº¿ç¨‹ã€‚</p> <p>ä½¿ç”¨ setDaemon() æ–¹æ³•å°†ä¸€ä¸ªçº¿ç¨‹è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹ã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyRunnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    thread<span class="token punctuation">.</span><span class="token function">setDaemon</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="sleep"><a href="#sleep" class="header-anchor">#</a> sleep()</h3> <p>Thread.sleep(millisec) æ–¹æ³•ä¼šä¼‘çœ å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ï¼Œmillisec å•ä½ä¸ºæ¯«ç§’ã€‚</p> <p>sleep() å¯èƒ½ä¼šæŠ›å‡º InterruptedExceptionï¼Œå› ä¸ºå¼‚å¸¸ä¸èƒ½è·¨çº¿ç¨‹ä¼ æ’­å› main() ä¸­ï¼Œå› æ­¤å¿…é¡»åœ¨æœ¬åœ°è¿›è¡Œå¤„ç†ã€‚çº¿ç¨‹ä¸­æŠ›å‡ºçš„å…¶å®ƒå¼‚å¸¸ä¹ŸåŒæ ·éœ€è¦åœ¨æœ¬åœ°è¿›è¡Œå¤„ç†ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public void run() {
    try {
        Thread.sleep(3000);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="yield"><a href="#yield" class="header-anchor">#</a> yield()</h3> <p>å¯¹é™æ€æ–¹æ³• Thread.yield() çš„è°ƒç”¨å£°æ˜äº†å½“å‰çº¿ç¨‹å·²ç»å®Œæˆäº†ç”Ÿå‘½å‘¨æœŸä¸­æœ€é‡è¦çš„éƒ¨åˆ†ï¼Œå¯ä»¥åˆ‡æ¢ç»™å…¶å®ƒçº¿ç¨‹æ¥æ‰§è¡Œã€‚è¯¥æ–¹æ³•åªæ˜¯å¯¹çº¿ç¨‹è°ƒåº¦å™¨çš„ä¸€ä¸ªå»ºè®®ï¼Œè€Œä¸”ä¹Ÿåªæ˜¯å»ºè®®å…·æœ‰ç›¸åŒä¼˜å…ˆçº§çš„å…¶å®ƒçº¿ç¨‹å¯ä»¥è¿è¡Œã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token keyword">yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="çº¿ç¨‹ä¸­æ–­"><a href="#çº¿ç¨‹ä¸­æ–­" class="header-anchor">#</a> <strong>çº¿ç¨‹ä¸­æ–­</strong></h2> <p>ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åä¼šè‡ªåŠ¨ç»“æŸï¼Œå¦‚æœåœ¨è¿è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸ä¹Ÿä¼šæå‰ç»“æŸã€‚</p> <h3 id="interruptedexception"><a href="#interruptedexception" class="header-anchor">#</a> InterruptedException</h3> <p>é€šè¿‡è°ƒç”¨ä¸€ä¸ªçº¿ç¨‹çš„ interrupt() æ¥ä¸­æ–­è¯¥çº¿ç¨‹ï¼Œå¦‚æœè¯¥çº¿ç¨‹å¤„äºé˜»å¡ã€é™æœŸç­‰å¾…æˆ–è€…æ— é™æœŸç­‰å¾…çŠ¶æ€ï¼Œé‚£ä¹ˆå°±ä¼šæŠ›å‡º InterruptedExceptionï¼Œä»è€Œæå‰ç»“æŸè¯¥çº¿ç¨‹ã€‚ä½†æ˜¯ä¸èƒ½ä¸­æ–­ I/O é˜»å¡å’Œ synchronized é”é˜»å¡ã€‚</p> <p>å¯¹äºä»¥ä¸‹ä»£ç ï¼Œåœ¨ main() ä¸­å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ä¹‹åå†ä¸­æ–­å®ƒï¼Œç”±äºçº¿ç¨‹ä¸­è°ƒç”¨äº† Thread.sleep() æ–¹æ³•ï¼Œå› æ­¤ä¼šæŠ›å‡ºä¸€ä¸ª InterruptedExceptionï¼Œä»è€Œæå‰ç»“æŸçº¿ç¨‹ï¼Œä¸æ‰§è¡Œä¹‹åçš„è¯­å¥ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class InterruptExample {

    private static class MyThread1 extends Thread {
        @Override
        public void run() {
            try {
                Thread.sleep(2000);
                System.out.println(&quot;Thread run&quot;);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>public static void main(String[] args) throws InterruptedException {
    Thread thread1 = new MyThread1();
    thread1.start();
    thread1.interrupt();
    System.out.println(&quot;Main run&quot;);
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>Main run
java.lang.InterruptedException: sleep interrupted
    at java.lang.Thread.sleep(Native Method)
    at InterruptExample.lambda$main$0(InterruptExample.java:5)
    at InterruptExample$$Lambda$1/713338599.run(Unknown Source)
    at java.lang.Thread.run(Thread.java:745)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="interrupted"><a href="#interrupted" class="header-anchor">#</a> interrupted()</h3> <p>å¦‚æœä¸€ä¸ªçº¿ç¨‹çš„ run() æ–¹æ³•æ‰§è¡Œä¸€ä¸ªæ— é™å¾ªç¯ï¼Œå¹¶ä¸”æ²¡æœ‰æ‰§è¡Œ sleep() ç­‰ä¼šæŠ›å‡º InterruptedException çš„æ“ä½œï¼Œé‚£ä¹ˆè°ƒç”¨çº¿ç¨‹çš„ interrupt() æ–¹æ³•å°±æ— æ³•ä½¿çº¿ç¨‹æå‰ç»“æŸã€‚</p> <p>ä½†æ˜¯è°ƒç”¨ interrupt() æ–¹æ³•ä¼šè®¾ç½®çº¿ç¨‹çš„ä¸­æ–­æ ‡è®°ï¼Œæ­¤æ—¶è°ƒç”¨ interrupted() æ–¹æ³•ä¼šè¿”å› trueã€‚å› æ­¤å¯ä»¥åœ¨å¾ªç¯ä½“ä¸­ä½¿ç”¨ interrupted() æ–¹æ³•æ¥åˆ¤æ–­çº¿ç¨‹æ˜¯å¦å¤„äºä¸­æ–­çŠ¶æ€ï¼Œä»è€Œæå‰ç»“æŸçº¿ç¨‹ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class InterruptExample {

    private static class MyThread2 extends Thread {
        @Override
        public void run() {
            while (!interrupted()) {
                // ..
            }
            System.out.println(&quot;Thread end&quot;);
        }
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>public static void main(String[] args) throws InterruptedException {
    Thread thread2 = new MyThread2();
    thread2.start();
    thread2.interrupt();
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Thread</span> end
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="executor-çš„ä¸­æ–­æ“ä½œ"><a href="#executor-çš„ä¸­æ–­æ“ä½œ" class="header-anchor">#</a> Executor çš„ä¸­æ–­æ“ä½œ</h3> <p>è°ƒç”¨ Executor çš„ shutdown() æ–¹æ³•ä¼šç­‰å¾…çº¿ç¨‹éƒ½æ‰§è¡Œå®Œæ¯•ä¹‹åå†å…³é—­ï¼Œä½†æ˜¯å¦‚æœè°ƒç”¨çš„æ˜¯ shutdownNow() æ–¹æ³•ï¼Œåˆ™ç›¸å½“äºè°ƒç”¨æ¯ä¸ªçº¿ç¨‹çš„ interrupt() æ–¹æ³•ã€‚</p> <p>ä»¥ä¸‹ä½¿ç”¨ Lambda åˆ›å»ºçº¿ç¨‹ï¼Œç›¸å½“äºåˆ›å»ºäº†ä¸€ä¸ªåŒ¿åå†…éƒ¨çº¿ç¨‹ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public static void main(String[] args) {
    ExecutorService executorService = Executors.newCachedThreadPool();
    executorService.execute(() -&gt; {
        try {
            Thread.sleep(2000);
            System.out.println(&quot;Thread run&quot;);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    });
    executorService.shutdownNow();
    System.out.println(&quot;Main run&quot;);
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>Main run
java.lang.InterruptedException: sleep interrupted
    at java.lang.Thread.sleep(Native Method)
    at ExecutorInterruptExample.lambda$main$0(ExecutorInterruptExample.java:9)
    at ExecutorInterruptExample$$Lambda$1/1160460865.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
    at java.lang.Thread.run(Thread.java:745)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>å¦‚æœåªæƒ³ä¸­æ–­ Executor ä¸­çš„ä¸€ä¸ªçº¿ç¨‹ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨ submit() æ–¹æ³•æ¥æäº¤ä¸€ä¸ªçº¿ç¨‹ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ª Future&lt;?&gt; å¯¹è±¡ï¼Œé€šè¿‡è°ƒç”¨è¯¥å¯¹è±¡çš„ cancel(true) æ–¹æ³•å°±å¯ä»¥ä¸­æ–­çº¿ç¨‹ã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> future <span class="token operator">=</span> executorService<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// ..</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
future<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="çº¿ç¨‹äº’æ–¥åŒæ­¥"><a href="#çº¿ç¨‹äº’æ–¥åŒæ­¥" class="header-anchor">#</a> çº¿ç¨‹äº’æ–¥åŒæ­¥</h2> <p>Java æä¾›äº†ä¸¤ç§é”æœºåˆ¶æ¥æ§åˆ¶å¤šä¸ªçº¿ç¨‹å¯¹å…±äº«èµ„æºçš„äº’æ–¥è®¿é—®ï¼Œç¬¬ä¸€ä¸ªæ˜¯ JVM å®ç°çš„ synchronizedï¼Œè€Œå¦ä¸€ä¸ªæ˜¯ JDK å®ç°çš„ ReentrantLockã€‚</p> <h3 id="synchronized"><a href="#synchronized" class="header-anchor">#</a> synchronized</h3> <p><strong>1. åŒæ­¥ä¸€ä¸ªä»£ç å—</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public void func() {
    synchronized (this) {
        // ...
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>å®ƒåªä½œç”¨äºåŒä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœè°ƒç”¨ä¸¤ä¸ªå¯¹è±¡ä¸Šçš„åŒæ­¥ä»£ç å—ï¼Œå°±ä¸ä¼šè¿›è¡ŒåŒæ­¥ã€‚</p> <p>å¯¹äºä»¥ä¸‹ä»£ç ï¼Œä½¿ç”¨ ExecutorService æ‰§è¡Œäº†ä¸¤ä¸ªçº¿ç¨‹ï¼Œç”±äºè°ƒç”¨çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡çš„åŒæ­¥ä»£ç å—ï¼Œå› æ­¤è¿™ä¸¤ä¸ªçº¿ç¨‹ä¼šè¿›è¡ŒåŒæ­¥ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è¿›å…¥åŒæ­¥è¯­å¥å—æ—¶ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹å°±å¿…é¡»ç­‰å¾…ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class SynchronizedExample {

    public void func1() {
        synchronized (this) {
            for (int i = 0; i &lt; 10; i++) {
                System.out.print(i + &quot; &quot;);
            }
        }
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>public static void main(String[] args) {
    SynchronizedExample e1 = new SynchronizedExample();
    ExecutorService executorService = Executors.newCachedThreadPool();
    executorService.execute(() -&gt; e1.func1());
    executorService.execute(() -&gt; e1.func1());
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å¯¹äºä»¥ä¸‹ä»£ç ï¼Œä¸¤ä¸ªçº¿ç¨‹è°ƒç”¨äº†ä¸åŒå¯¹è±¡çš„åŒæ­¥ä»£ç å—ï¼Œå› æ­¤è¿™ä¸¤ä¸ªçº¿ç¨‹å°±ä¸éœ€è¦åŒæ­¥ã€‚ä»è¾“å‡ºç»“æœå¯ä»¥çœ‹å‡ºï¼Œä¸¤ä¸ªçº¿ç¨‹äº¤å‰æ‰§è¡Œã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public static void main(String[] args) {
    SynchronizedExample e1 = new SynchronizedExample();
    SynchronizedExample e2 = new SynchronizedExample();
    ExecutorService executorService = Executors.newCachedThreadPool();
    executorService.execute(() -&gt; e1.func1());
    executorService.execute(() -&gt; e2.func1());
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>0 0 1 1 2 2 3 3 4 4 5 5 6 6 7 7 8 8 9 9
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>2. åŒæ­¥ä¸€ä¸ªæ–¹æ³•</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public synchronized void func () {
    // ...
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>å®ƒå’ŒåŒæ­¥ä»£ç å—ä¸€æ ·ï¼Œä½œç”¨äºåŒä¸€ä¸ªå¯¹è±¡ã€‚</p> <p><strong>3. åŒæ­¥ä¸€ä¸ªç±»</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public void func() {
    synchronized (SynchronizedExample.class) {
        // ...
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>ä½œç”¨äºæ•´ä¸ªç±»ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸¤ä¸ªçº¿ç¨‹è°ƒç”¨åŒä¸€ä¸ªç±»çš„ä¸åŒå¯¹è±¡ä¸Šçš„è¿™ç§åŒæ­¥è¯­å¥ï¼Œä¹Ÿä¼šè¿›è¡ŒåŒæ­¥ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class SynchronizedExample {

    public void func2() {
        synchronized (SynchronizedExample.class) {
            for (int i = 0; i &lt; 10; i++) {
                System.out.print(i + &quot; &quot;);
            }
        }
    }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>public static void main(String[] args) {
    SynchronizedExample e1 = new SynchronizedExample();
    SynchronizedExample e2 = new SynchronizedExample();
    ExecutorService executorService = Executors.newCachedThreadPool();
    executorService.execute(() -&gt; e1.func2());
    executorService.execute(() -&gt; e2.func2());
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>4. åŒæ­¥ä¸€ä¸ªé™æ€æ–¹æ³•</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public synchronized static void fun() {
    // ...
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ä½œç”¨äºæ•´ä¸ªç±»ã€‚</p> <h3 id="reentrantlock"><a href="#reentrantlock" class="header-anchor">#</a> ReentrantLock</h3> <p>ReentrantLock æ˜¯ java.util.concurrent(J.U.C)åŒ…ä¸­çš„é”ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class LockExample {

    private Lock lock = new ReentrantLock();

    public void func() {
        lock.lock();
        try {
            for (int i = 0; i &lt; 10; i++) {
                System.out.print(i + &quot; &quot;);
            }
        } finally {
            lock.unlock(); // ç¡®ä¿é‡Šæ”¾é”ï¼Œä»è€Œé¿å…å‘ç”Ÿæ­»é”ã€‚
        }
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>public static void main(String[] args) {
    LockExample lockExample = new LockExample();
    ExecutorService executorService = Executors.newCachedThreadPool();
    executorService.execute(() -&gt; lockExample.func());
    executorService.execute(() -&gt; lockExample.func());
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="æ¯”è¾ƒ"><a href="#æ¯”è¾ƒ" class="header-anchor">#</a> æ¯”è¾ƒ</h3> <p><strong>1. é”çš„å®ç°</strong></p> <p>synchronized æ˜¯ JVM å®ç°çš„ï¼Œè€Œ ReentrantLock æ˜¯ JDK å®ç°çš„ã€‚</p> <p><strong>2. æ€§èƒ½</strong></p> <p>æ–°ç‰ˆæœ¬ Java å¯¹ synchronized è¿›è¡Œäº†å¾ˆå¤šä¼˜åŒ–ï¼Œä¾‹å¦‚è‡ªæ—‹é”ç­‰ï¼Œsynchronized ä¸ ReentrantLock å¤§è‡´ç›¸åŒã€‚</p> <p><strong>3. ç­‰å¾…å¯ä¸­æ–­</strong></p> <p>å½“æŒæœ‰é”çš„çº¿ç¨‹é•¿æœŸä¸é‡Šæ”¾é”çš„æ—¶å€™ï¼Œæ­£åœ¨ç­‰å¾…çš„çº¿ç¨‹å¯ä»¥é€‰æ‹©æ”¾å¼ƒç­‰å¾…ï¼Œæ”¹ä¸ºå¤„ç†å…¶ä»–äº‹æƒ…ã€‚</p> <p>ReentrantLock å¯ä¸­æ–­ï¼Œè€Œ synchronized ä¸è¡Œã€‚</p> <p><strong>4. å…¬å¹³é”</strong></p> <p>å…¬å¹³é”æ˜¯æŒ‡å¤šä¸ªçº¿ç¨‹åœ¨ç­‰å¾…åŒä¸€ä¸ªé”æ—¶ï¼Œå¿…é¡»æŒ‰ç…§ç”³è¯·é”çš„æ—¶é—´é¡ºåºæ¥ä¾æ¬¡è·å¾—é”ã€‚</p> <p>synchronized ä¸­çš„é”æ˜¯éå…¬å¹³çš„ï¼ŒReentrantLock é»˜è®¤æƒ…å†µä¸‹ä¹Ÿæ˜¯éå…¬å¹³çš„ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥æ˜¯å…¬å¹³çš„ã€‚</p> <p><strong>5. é”ç»‘å®šå¤šä¸ªæ¡ä»¶</strong></p> <p>ä¸€ä¸ª ReentrantLock å¯ä»¥åŒæ—¶ç»‘å®šå¤šä¸ª Condition å¯¹è±¡ã€‚</p> <h3 id="ä½¿ç”¨æ¨èé€‰æ‹©"><a href="#ä½¿ç”¨æ¨èé€‰æ‹©" class="header-anchor">#</a> ä½¿ç”¨æ¨èé€‰æ‹©</h3> <p>é™¤ééœ€è¦ä½¿ç”¨ ReentrantLock çš„é«˜çº§åŠŸèƒ½ï¼Œå¦åˆ™ä¼˜å…ˆä½¿ç”¨ synchronizedã€‚è¿™æ˜¯å› ä¸º synchronized æ˜¯ JVM å®ç°çš„ä¸€ç§é”æœºåˆ¶ï¼ŒJVM åŸç”Ÿåœ°æ”¯æŒå®ƒï¼Œè€Œ ReentrantLock ä¸æ˜¯æ‰€æœ‰çš„ JDK ç‰ˆæœ¬éƒ½æ”¯æŒã€‚å¹¶ä¸”ä½¿ç”¨ synchronized ä¸ç”¨æ‹…å¿ƒæ²¡æœ‰é‡Šæ”¾é”è€Œå¯¼è‡´æ­»é”é—®é¢˜ï¼Œå› ä¸º JVM ä¼šç¡®ä¿é”çš„é‡Šæ”¾ã€‚</p> <h2 id="çº¿ç¨‹ä¹‹é—´çš„åä½œ"><a href="#çº¿ç¨‹ä¹‹é—´çš„åä½œ" class="header-anchor">#</a> çº¿ç¨‹ä¹‹é—´çš„åä½œ</h2> <p>å½“å¤šä¸ªçº¿ç¨‹å¯ä»¥ä¸€èµ·å·¥ä½œå»è§£å†³æŸä¸ªé—®é¢˜æ—¶ï¼Œå¦‚æœæŸäº›éƒ¨åˆ†å¿…é¡»åœ¨å…¶å®ƒéƒ¨åˆ†ä¹‹å‰å®Œæˆï¼Œé‚£ä¹ˆå°±éœ€è¦å¯¹çº¿ç¨‹è¿›è¡Œåè°ƒã€‚</p> <h3 id="join"><a href="#join" class="header-anchor">#</a> join()</h3> <p>åœ¨çº¿ç¨‹ä¸­è°ƒç”¨å¦ä¸€ä¸ªçº¿ç¨‹çš„ join() æ–¹æ³•ï¼Œä¼šå°†å½“å‰çº¿ç¨‹æŒ‚èµ·ï¼Œè€Œä¸æ˜¯å¿™ç­‰å¾…ï¼Œç›´åˆ°ç›®æ ‡çº¿ç¨‹ç»“æŸã€‚</p> <p>å¯¹äºä»¥ä¸‹ä»£ç ï¼Œè™½ç„¶ b çº¿ç¨‹å…ˆå¯åŠ¨ï¼Œä½†æ˜¯å› ä¸ºåœ¨ b çº¿ç¨‹ä¸­è°ƒç”¨äº† a çº¿ç¨‹çš„ join() æ–¹æ³•ï¼Œb çº¿ç¨‹ä¼šç­‰å¾… a çº¿ç¨‹ç»“æŸæ‰ç»§ç»­æ‰§è¡Œï¼Œå› æ­¤æœ€åèƒ½å¤Ÿä¿è¯ a çº¿ç¨‹çš„è¾“å‡ºå…ˆäº b çº¿ç¨‹çš„è¾“å‡ºã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class JoinExample {

    private class A extends Thread {
        @Override
        public void run() {
            System.out.println(&quot;A&quot;);
        }
    }

    private class B extends Thread {

        private A a;

        B(A a) {
            this.a = a;
        }

        @Override
        public void run() {
            try {
                a.join();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            System.out.println(&quot;B&quot;);
        }
    }

    public void test() {
        A a = new A();
        B b = new B(a);
        b.start();
        a.start();
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>public static void main(String[] args) {
    JoinExample example = new JoinExample();
    example.test();
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">A</span>
<span class="token class-name">B</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="wait-notify-notifyall"><a href="#wait-notify-notifyall" class="header-anchor">#</a> wait() notify() notifyAll()</h3> <p>è°ƒç”¨ wait() ä½¿å¾—çº¿ç¨‹ç­‰å¾…æŸä¸ªæ¡ä»¶æ»¡è¶³ï¼Œçº¿ç¨‹åœ¨ç­‰å¾…æ—¶ä¼šè¢«æŒ‚èµ·ï¼Œå½“å…¶ä»–çº¿ç¨‹çš„è¿è¡Œä½¿å¾—è¿™ä¸ªæ¡ä»¶æ»¡è¶³æ—¶ï¼Œå…¶å®ƒçº¿ç¨‹ä¼šè°ƒç”¨ notify() æˆ–è€… notifyAll() æ¥å”¤é†’æŒ‚èµ·çš„çº¿ç¨‹ã€‚</p> <p>å®ƒä»¬éƒ½å±äº Object çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸å±äº Threadã€‚</p> <p>åªèƒ½ç”¨åœ¨åŒæ­¥æ–¹æ³•æˆ–è€…åŒæ­¥æ§åˆ¶å—ä¸­ä½¿ç”¨ï¼Œå¦åˆ™ä¼šåœ¨è¿è¡Œæ—¶æŠ›å‡º IllegalMonitorStateExeceptionã€‚</p> <p>ä½¿ç”¨ wait() æŒ‚èµ·æœŸé—´ï¼Œçº¿ç¨‹ä¼šé‡Šæ”¾é”ã€‚è¿™æ˜¯å› ä¸ºï¼Œå¦‚æœæ²¡æœ‰é‡Šæ”¾é”ï¼Œé‚£ä¹ˆå…¶å®ƒçº¿ç¨‹å°±æ— æ³•è¿›å…¥å¯¹è±¡çš„åŒæ­¥æ–¹æ³•æˆ–è€…åŒæ­¥æ§åˆ¶å—ä¸­ï¼Œé‚£ä¹ˆå°±æ— æ³•æ‰§è¡Œ notify() æˆ–è€… notifyAll() æ¥å”¤é†’æŒ‚èµ·çš„çº¿ç¨‹ï¼Œé€ æˆæ­»é”ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class WaitNotifyExample {
    public synchronized void before() {
        System.out.println(&quot;before&quot;);
        notifyAll();
    }

    public synchronized void after() {
        try {
            wait();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        System.out.println(&quot;after&quot;);
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ExecutorService</span> executorService <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newCachedThreadPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">WaitNotifyExample</span> example <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WaitNotifyExample</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    executorService<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> example<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    executorService<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> example<span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>before
after
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>wait() å’Œ sleep() çš„åŒºåˆ«</strong></p> <ul><li>wait() æ˜¯ Object çš„æ–¹æ³•ï¼Œè€Œ sleep() æ˜¯ Thread çš„é™æ€æ–¹æ³•ï¼›</li> <li>wait() ä¼šé‡Šæ”¾é”ï¼Œsleep() ä¸ä¼šã€‚</li></ul> <h3 id="await-signal-signalall"><a href="#await-signal-signalall" class="header-anchor">#</a> await() signal() signalAll()</h3> <p>java.util.concurrent ç±»åº“ä¸­æä¾›äº† Condition ç±»æ¥å®ç°çº¿ç¨‹ä¹‹é—´çš„åè°ƒï¼Œå¯ä»¥åœ¨ Condition ä¸Šè°ƒç”¨ await() æ–¹æ³•ä½¿çº¿ç¨‹ç­‰å¾…ï¼Œå…¶å®ƒçº¿ç¨‹è°ƒç”¨ signal() æˆ– signalAll() æ–¹æ³•å”¤é†’ç­‰å¾…çš„çº¿ç¨‹ã€‚ç›¸æ¯”äº wait() è¿™ç§ç­‰å¾…æ–¹å¼ï¼Œawait() å¯ä»¥æŒ‡å®šç­‰å¾…çš„æ¡ä»¶ï¼Œå› æ­¤æ›´åŠ çµæ´»ã€‚</p> <p>ä½¿ç”¨ Lock æ¥è·å–ä¸€ä¸ª Condition å¯¹è±¡ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class AwaitSignalExample {
    private Lock lock = new ReentrantLock();
    private Condition condition = lock.newCondition();

    public void before() {
        lock.lock();
        try {
            System.out.println(&quot;before&quot;);
            condition.signalAll();
        } finally {
            lock.unlock();
        }
    }

    public void after() {
        lock.lock();
        try {
            condition.await();
            System.out.println(&quot;after&quot;);
        } catch (InterruptedException e) {
            e.printStackTrace();
        } finally {
            lock.unlock();
        }
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>1234567891011121314151617181920212223242526</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public static void main(String[] args) {
    ExecutorService executorService = Executors.newCachedThreadPool();
    AwaitSignalExample example = new AwaitSignalExample();
    executorService.execute(() -&gt; example.after());
    executorService.execute(() -&gt; example.before());
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code>before
after
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">2022/1/16 ä¸‹åˆ5:53:08</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/md/java/learn/é«˜å¹¶å‘-çŸ¥è¯†ä½“ç³».html" class="prev">
        é«˜å¹¶å‘-çŸ¥è¯†ä½“ç³»
      </a></span> <span class="next"><a href="/md/java/learn/é«˜å¹¶å‘-ç†è®ºåŸºç¡€.html">
        é«˜å¹¶å‘-ç†è®ºåŸºç¡€
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.27f0b381.js" defer></script><script src="/assets/js/5.ea3a467f.js" defer></script><script src="/assets/js/25.32e88dc5.js" defer></script>
  </body>
</html>
