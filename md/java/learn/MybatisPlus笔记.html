<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Mybatis-Plus | ç§äººçŸ¥è¯†å›¾ä¹¦é¦†</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="åŒ…å«: Java åŸºç¡€, Java éƒ¨åˆ†æºç , JVM, Spring, Spring Boot, Spring Cloud, æ•°æ®åº“åŸç†, MySQL, ElasticSearch, MongoDB, Docker, k8s, CI&amp;CD, Linux, DevOps, åˆ†å¸ƒå¼, ä¸­é—´ä»¶, å¼€å‘å·¥å…·, Git, IDE, æºç é˜…è¯»ï¼Œè¯»ä¹¦ç¬”è®°, å¼€æºé¡¹ç›®...">
    <meta name="robots" content="all">
    <meta name="author" content="pdai">
    <meta name="keywords" content="ç§äººçŸ¥è¯†å›¾ä¹¦é¦†, javaä½“ç³», javaçŸ¥è¯†ä½“ç³», javaæ¡†æ¶,javaè¯¦è§£,javaå­¦ä¹ è·¯çº¿,java spring, javaé¢è¯•, çŸ¥è¯†ä½“ç³», javaæŠ€æœ¯ä½“ç³», javaç¼–ç¨‹, javaç¼–ç¨‹æŒ‡å—,javaå¼€å‘ä½“ç³», javaå¼€å‘,javaæ•™ç¨‹,java,javaæ•°æ®ç»“æ„, ç®—æ³•, å¼€å‘åŸºç¡€">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <link rel="preload" href="/assets/css/0.styles.cb877f3d.css" as="style"><link rel="preload" href="/assets/js/app.7437448f.js" as="script"><link rel="preload" href="/assets/js/5.ea3a467f.js" as="script"><link rel="preload" href="/assets/js/16.de77b749.js" as="script"><link rel="prefetch" href="/assets/js/10.5ef4c92a.js"><link rel="prefetch" href="/assets/js/11.3f596b90.js"><link rel="prefetch" href="/assets/js/12.b71be16f.js"><link rel="prefetch" href="/assets/js/13.d6271850.js"><link rel="prefetch" href="/assets/js/14.9ba4f8e3.js"><link rel="prefetch" href="/assets/js/15.62d14093.js"><link rel="prefetch" href="/assets/js/17.b28c1669.js"><link rel="prefetch" href="/assets/js/18.65db727f.js"><link rel="prefetch" href="/assets/js/19.f0cab2cf.js"><link rel="prefetch" href="/assets/js/2.5197edd9.js"><link rel="prefetch" href="/assets/js/20.bc2a1ebe.js"><link rel="prefetch" href="/assets/js/21.9d44366f.js"><link rel="prefetch" href="/assets/js/22.8d7f32d4.js"><link rel="prefetch" href="/assets/js/23.7f7b97fc.js"><link rel="prefetch" href="/assets/js/24.b84a7d83.js"><link rel="prefetch" href="/assets/js/25.a12b8134.js"><link rel="prefetch" href="/assets/js/26.d6cf3bce.js"><link rel="prefetch" href="/assets/js/27.304e0d0a.js"><link rel="prefetch" href="/assets/js/28.12e94d0e.js"><link rel="prefetch" href="/assets/js/29.79c71861.js"><link rel="prefetch" href="/assets/js/3.310235c4.js"><link rel="prefetch" href="/assets/js/30.90aec520.js"><link rel="prefetch" href="/assets/js/31.59769de4.js"><link rel="prefetch" href="/assets/js/32.54420f34.js"><link rel="prefetch" href="/assets/js/33.90c0c365.js"><link rel="prefetch" href="/assets/js/4.1fed06c3.js"><link rel="prefetch" href="/assets/js/6.6906b7c0.js"><link rel="prefetch" href="/assets/js/7.6030a7b8.js"><link rel="prefetch" href="/assets/js/8.15f570fb.js"><link rel="prefetch" href="/assets/js/9.bbacd143.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cb877f3d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/favicon.ico" alt="ç§äººçŸ¥è¯†å›¾ä¹¦é¦†" class="logo"> <span class="site-name can-hide">ç§äººçŸ¥è¯†å›¾ä¹¦é¦†</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  æ¦‚è¿°
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å­¦ä¹ ç¬”è®°" class="dropdown-title"><span class="title">å­¦ä¹ ç¬”è®°</span> <span class="arrow down"></span></button> <button type="button" aria-label="å­¦ä¹ ç¬”è®°" class="mobile-dropdown-title"><span class="title">å­¦ä¹ ç¬”è®°</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          å‰ç«¯
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/learn/learn-typescript.html" class="nav-link">
  Typescript
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/ChromeExtensions.html" class="nav-link">
  ChromeExtensions
</a></li></ul></li><li class="dropdown-item"><h4>
          Java
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/learn/Java8-Stream.html" class="nav-link">
  Stream
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/Java8-Optional.html" class="nav-link">
  Optional
</a></li></ul></li><li class="dropdown-item"><h4>
          Javaé«˜å¹¶å‘
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/learn/Javaçº¿ç¨‹æ± .html" class="nav-link">
  Javaçº¿ç¨‹æ± 
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/é«˜å¹¶å‘-çŸ¥è¯†ä½“ç³».html" class="nav-link">
  é«˜å¹¶å‘-çŸ¥è¯†ä½“ç³»
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html" class="nav-link">
  é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/é«˜å¹¶å‘-ç†è®ºåŸºç¡€.html" class="nav-link">
  é«˜å¹¶å‘-ç†è®ºåŸºç¡€
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/å…³é”®å­—-synchronized.html" class="nav-link">
  å…³é”®å­—-synchronized
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/å…³é”®å­—-volatile.html" class="nav-link">
  å…³é”®å­—-volatile
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/å…³é”®å­—-final.html" class="nav-link">
  å…³é”®å­—-final
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/é«˜å¹¶å‘-ThreadLocalè¯¦è§£.html" class="nav-link">
  é«˜å¹¶å‘-ThreadLocalè¯¦è§£
</a></li></ul></li><li class="dropdown-item"><h4>
          æ¡†æ¶
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/learn/Springç¬”è®°.html" class="nav-link">
  Springç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/Spring-MVCç¬”è®°.html" class="nav-link">
  SpringMVCç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/Mybatisç¬”è®°.html" class="nav-link">
  Mybatisç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/MybatisPlusç¬”è®°.html" class="nav-link">
  MybatisPlusç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/Springç¬”è®°.html" class="nav-link">
  SpringBootç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/Dubboå­¦ä¹ ç¬”è®°.html" class="nav-link">
  Dubboç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/learn-zookeeper.html" class="nav-link">
  Zookeeperç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/learn-redis.html" class="nav-link">
  Redisç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/learn-elasticstack.html" class="nav-link">
  Elasticstackç¬”è®°
</a></li></ul></li><li class="dropdown-item"><h4>
          JVM
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/learn/JVMå¿«é€Ÿå…¥é—¨ç¯‡.html" class="nav-link">
  JVMå¿«é€Ÿå…¥é—¨ç¯‡
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ–¹æ³•è®º" class="dropdown-title"><span class="title">æ–¹æ³•è®º</span> <span class="arrow down"></span></button> <button type="button" aria-label="æ–¹æ³•è®º" class="mobile-dropdown-title"><span class="title">æ–¹æ³•è®º</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/md/java/method/è®¾è®¡æ¨¡å¼.html" class="nav-link">
  è®¾è®¡æ¨¡å¼
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç‰ˆæœ¬å·¥å…·" class="dropdown-title"><span class="title">ç‰ˆæœ¬å·¥å…·</span> <span class="arrow down"></span></button> <button type="button" aria-label="ç‰ˆæœ¬å·¥å…·" class="mobile-dropdown-title"><span class="title">ç‰ˆæœ¬å·¥å…·</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/md/java/tool/Git.html" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/md/java/tool/Mavenå­¦ä¹ ç¬”è®°.html" class="nav-link">
  Maven
</a></li></ul></div></div><div class="nav-item"><a href="/md/about/about-me.html" class="nav-link">
  å…³äº
</a></div><div class="nav-item"><a href="https://github.com/amzpiper" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  æ¦‚è¿°
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å­¦ä¹ ç¬”è®°" class="dropdown-title"><span class="title">å­¦ä¹ ç¬”è®°</span> <span class="arrow down"></span></button> <button type="button" aria-label="å­¦ä¹ ç¬”è®°" class="mobile-dropdown-title"><span class="title">å­¦ä¹ ç¬”è®°</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          å‰ç«¯
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/learn/learn-typescript.html" class="nav-link">
  Typescript
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/ChromeExtensions.html" class="nav-link">
  ChromeExtensions
</a></li></ul></li><li class="dropdown-item"><h4>
          Java
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/learn/Java8-Stream.html" class="nav-link">
  Stream
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/Java8-Optional.html" class="nav-link">
  Optional
</a></li></ul></li><li class="dropdown-item"><h4>
          Javaé«˜å¹¶å‘
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/learn/Javaçº¿ç¨‹æ± .html" class="nav-link">
  Javaçº¿ç¨‹æ± 
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/é«˜å¹¶å‘-çŸ¥è¯†ä½“ç³».html" class="nav-link">
  é«˜å¹¶å‘-çŸ¥è¯†ä½“ç³»
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html" class="nav-link">
  é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/é«˜å¹¶å‘-ç†è®ºåŸºç¡€.html" class="nav-link">
  é«˜å¹¶å‘-ç†è®ºåŸºç¡€
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/å…³é”®å­—-synchronized.html" class="nav-link">
  å…³é”®å­—-synchronized
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/å…³é”®å­—-volatile.html" class="nav-link">
  å…³é”®å­—-volatile
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/å…³é”®å­—-final.html" class="nav-link">
  å…³é”®å­—-final
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/é«˜å¹¶å‘-ThreadLocalè¯¦è§£.html" class="nav-link">
  é«˜å¹¶å‘-ThreadLocalè¯¦è§£
</a></li></ul></li><li class="dropdown-item"><h4>
          æ¡†æ¶
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/learn/Springç¬”è®°.html" class="nav-link">
  Springç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/Spring-MVCç¬”è®°.html" class="nav-link">
  SpringMVCç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/Mybatisç¬”è®°.html" class="nav-link">
  Mybatisç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/MybatisPlusç¬”è®°.html" class="nav-link">
  MybatisPlusç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/Springç¬”è®°.html" class="nav-link">
  SpringBootç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/Dubboå­¦ä¹ ç¬”è®°.html" class="nav-link">
  Dubboç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/learn-zookeeper.html" class="nav-link">
  Zookeeperç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/learn-redis.html" class="nav-link">
  Redisç¬”è®°
</a></li><li class="dropdown-subitem"><a href="/md/java/learn/learn-elasticstack.html" class="nav-link">
  Elasticstackç¬”è®°
</a></li></ul></li><li class="dropdown-item"><h4>
          JVM
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/md/java/learn/JVMå¿«é€Ÿå…¥é—¨ç¯‡.html" class="nav-link">
  JVMå¿«é€Ÿå…¥é—¨ç¯‡
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ–¹æ³•è®º" class="dropdown-title"><span class="title">æ–¹æ³•è®º</span> <span class="arrow down"></span></button> <button type="button" aria-label="æ–¹æ³•è®º" class="mobile-dropdown-title"><span class="title">æ–¹æ³•è®º</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/md/java/method/è®¾è®¡æ¨¡å¼.html" class="nav-link">
  è®¾è®¡æ¨¡å¼
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç‰ˆæœ¬å·¥å…·" class="dropdown-title"><span class="title">ç‰ˆæœ¬å·¥å…·</span> <span class="arrow down"></span></button> <button type="button" aria-label="ç‰ˆæœ¬å·¥å…·" class="mobile-dropdown-title"><span class="title">ç‰ˆæœ¬å·¥å…·</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/md/java/tool/Git.html" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/md/java/tool/Mavenå­¦ä¹ ç¬”è®°.html" class="nav-link">
  Maven
</a></li></ul></div></div><div class="nav-item"><a href="/md/about/about-me.html" class="nav-link">
  å…³äº
</a></div><div class="nav-item"><a href="https://github.com/amzpiper" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>å‰ç«¯</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/md/java/learn/learn-typescript.html" class="sidebar-link">TypeScript</a></li><li><a href="/md/java/learn/ChromeExtensions.html" class="sidebar-link">Chrome Extensions</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Java</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/md/java/learn/Java8-Stream.html" class="sidebar-link">Java 8 - Stream</a></li><li><a href="/md/java/learn/Java8-Optional.html" class="sidebar-link">Java 8 - Optional</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Javaé«˜å¹¶å‘</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/md/java/learn/Javaçº¿ç¨‹æ± .html" class="sidebar-link">Java çº¿ç¨‹æ± </a></li><li><a href="/md/java/learn/é«˜å¹¶å‘-çŸ¥è¯†ä½“ç³».html" class="sidebar-link">é«˜å¹¶å‘-çŸ¥è¯†ä½“ç³»</a></li><li><a href="/md/java/learn/é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€.html" class="sidebar-link">é«˜å¹¶å‘-çº¿ç¨‹åŸºç¡€</a></li><li><a href="/md/java/learn/é«˜å¹¶å‘-ç†è®ºåŸºç¡€.html" class="sidebar-link">é«˜å¹¶å‘-ç†è®ºåŸºç¡€</a></li><li><a href="/md/java/learn/å…³é”®å­—-synchronized.html" class="sidebar-link">å…³é”®å­—-synchronized</a></li><li><a href="/md/java/learn/å…³é”®å­—-volatile.html" class="sidebar-link">å…³é”®å­—-volatile</a></li><li><a href="/md/java/learn/å…³é”®å­—-final.html" class="sidebar-link">å…³é”®å­—-final</a></li><li><a href="/md/java/learn/é«˜å¹¶å‘-ThreadLocalè¯¦è§£.html" class="sidebar-link">é«˜å¹¶å‘ - ThreadLocalè¯¦è§£</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>æ¡†æ¶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/md/java/learn/Springç¬”è®°.html" class="sidebar-link">Spring</a></li><li><a href="/md/java/learn/Spring-MVCç¬”è®°.html" class="sidebar-link">SpringMVC</a></li><li><a href="/md/java/learn/Mybatisç¬”è®°.html" class="sidebar-link">Mybatis</a></li><li><a href="/md/java/learn/MybatisPlusç¬”è®°.html" class="active sidebar-link">Mybatis-Plus</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/md/java/learn/MybatisPlusç¬”è®°.html#_1-ç®€ä»‹" class="sidebar-link">1 ç®€ä»‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/md/java/learn/MybatisPlusç¬”è®°.html#_1-1-ç‰¹æ€§" class="sidebar-link">1.1 ç‰¹æ€§</a></li></ul></li><li class="sidebar-sub-header"><a href="/md/java/learn/MybatisPlusç¬”è®°.html#_2-å¿«é€Ÿå…¥é—¨" class="sidebar-link">2 å¿«é€Ÿå…¥é—¨</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/md/java/learn/MybatisPlusç¬”è®°.html#_2-1-åˆ›å»ºæ•°æ®åº“mybatis-plus" class="sidebar-link">2.1 åˆ›å»ºæ•°æ®åº“mybatis_plus</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/MybatisPlusç¬”è®°.html#_2-2-åˆ›å»ºuserè¡¨" class="sidebar-link">2.2 åˆ›å»ºuserè¡¨</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/MybatisPlusç¬”è®°.html#_2-3-æ–°å»ºé¡¹ç›®mybatis-plus" class="sidebar-link">2.3 æ–°å»ºé¡¹ç›®mybatis_plus</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/MybatisPlusç¬”è®°.html#_2-4-å¯¼å…¥ä¾èµ–" class="sidebar-link">2.4 å¯¼å…¥ä¾èµ–</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/MybatisPlusç¬”è®°.html#_2-5-è¿æ¥æ•°æ®åº“-é…ç½®" class="sidebar-link">2.5 è¿æ¥æ•°æ®åº“-é…ç½®</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/MybatisPlusç¬”è®°.html#_2-6-pojo-dao-service-controller" class="sidebar-link">2.6 pojo-dao-service-controller</a></li></ul></li><li class="sidebar-sub-header"><a href="/md/java/learn/MybatisPlusç¬”è®°.html#_3-é…ç½®æ—¥å¿—" class="sidebar-link">3 é…ç½®æ—¥å¿—</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/MybatisPlusç¬”è®°.html#_4-crudæ‰©å±•" class="sidebar-link">4 CRUDæ‰©å±•</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/md/java/learn/MybatisPlusç¬”è®°.html#_4-1-æ’å…¥" class="sidebar-link">4.1 æ’å…¥</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/MybatisPlusç¬”è®°.html#_4-2-æ›´æ–°" class="sidebar-link">4.2 æ›´æ–°</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/MybatisPlusç¬”è®°.html#_4-3-è‡ªåŠ¨åŒ–å¡«å……æ—¶é—´å­—æ®µ" class="sidebar-link">4.3 è‡ªåŠ¨åŒ–å¡«å……æ—¶é—´å­—æ®µ</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/MybatisPlusç¬”è®°.html#_4-4-ä¹è§‚é”" class="sidebar-link">4.4 ä¹è§‚é”</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/MybatisPlusç¬”è®°.html#_4-5-æŸ¥è¯¢æ“ä½œ" class="sidebar-link">4.5 æŸ¥è¯¢æ“ä½œ</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/MybatisPlusç¬”è®°.html#_4-6-åˆ†é¡µæŸ¥è¯¢" class="sidebar-link">4.6 åˆ†é¡µæŸ¥è¯¢</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/MybatisPlusç¬”è®°.html#_4-7-åˆ é™¤" class="sidebar-link">4.7 åˆ é™¤</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/MybatisPlusç¬”è®°.html#_4-8-é€»è¾‘åˆ é™¤" class="sidebar-link">4.8 é€»è¾‘åˆ é™¤</a></li></ul></li><li class="sidebar-sub-header"><a href="/md/java/learn/MybatisPlusç¬”è®°.html#_5-æ‰©å±•-ä¸»é”®ç”Ÿæˆç­–ç•¥" class="sidebar-link">5 æ‰©å±•ï¼šä¸»é”®ç”Ÿæˆç­–ç•¥ï¼š</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/MybatisPlusç¬”è®°.html#_6-æ€§èƒ½åˆ†ææ’ä»¶" class="sidebar-link">6 æ€§èƒ½åˆ†ææ’ä»¶</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/MybatisPlusç¬”è®°.html#_7-æ¡ä»¶è¿‡æ»¤å™¨wrapper" class="sidebar-link">7 æ¡ä»¶è¿‡æ»¤å™¨Wrapper</a></li><li class="sidebar-sub-header"><a href="/md/java/learn/MybatisPlusç¬”è®°.html#_8-ä»£ç è‡ªåŠ¨ç”Ÿæˆå™¨" class="sidebar-link">8 ä»£ç è‡ªåŠ¨ç”Ÿæˆå™¨</a></li></ul></li><li><a href="/md/java/learn/SpringBootç¬”è®°.html" class="sidebar-link">SpringBoot</a></li><li><a href="/md/java/learn/learn-zookeeper.html" class="sidebar-link">Zookeeper</a></li><li><a href="/md/java/learn/learn-redis.html" class="sidebar-link">Redis</a></li><li><a href="/md/java/learn/learn-elasticstack.html" class="sidebar-link">Elasticstack</a></li><li><a href="/md/java/learn/Dubboå­¦ä¹ ç¬”è®°.html" class="sidebar-link">Dubbo</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JVM</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/md/java/learn/JVMå¿«é€Ÿå…¥é—¨ç¯‡.html" class="sidebar-link">JVMå¿«é€Ÿå…¥é—¨ç¯‡</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="mybatis-plus"><a href="#mybatis-plus" class="header-anchor">#</a> Mybatis-Plus</h1> <blockquote><p>MybatisPluså¯ä»¥èŠ‚çœå¤§é‡æ—¶é—´ï¼ŒCRUDä»£ç éƒ½å¯ä»¥è‡ªåŠ¨åŒ–ã€‚
JPAï¼ˆä»…æœ‰springbootæ—¶ç”¨çš„å¤šï¼‰ã€tk-mapperï¼ˆå¼€æºé¡¹ç›®ç”¨çš„æ¯”è¾ƒå¤š ï¼‰ã€MybatisPlusï¼ˆå·æ‡’çš„ç”¨çš„æ¯”è¾ƒå¤šï¼‰</p></blockquote> <h2 id="_1-ç®€ä»‹"><a href="#_1-ç®€ä»‹" class="header-anchor">#</a> 1 ç®€ä»‹</h2> <p>ğŸš€ä¸ºç®€åŒ–å¼€å‘è€Œç”Ÿ</p> <p>å®˜ç½‘ï¼š<a href="https://baomidou.com/" target="_blank" rel="noopener noreferrer">https://baomidou.com/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong><a href="https://github.com/baomidou/mybatis-plus" target="_blank" rel="noopener noreferrer">MyBatis-PlusÂ (opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>ï¼ˆç®€ç§° MPï¼‰æ˜¯ä¸€ä¸ªÂ **<a href="https://www.mybatis.org/mybatis-3/" target="_blank" rel="noopener noreferrer">MyBatisÂ (opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>**çš„å¢å¼ºå·¥å…·ï¼Œåœ¨ MyBatis çš„åŸºç¡€ä¸Šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œä¸ºç®€åŒ–å¼€å‘ã€æé«˜æ•ˆç‡è€Œç”Ÿã€‚</p> <h3 id="_1-1-ç‰¹æ€§"><a href="#_1-1-ç‰¹æ€§" class="header-anchor">#</a> 1.1 ç‰¹æ€§</h3> <ul><li><strong>æ— ä¾µå…¥</strong>ï¼šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œå¼•å…¥å®ƒä¸ä¼šå¯¹ç°æœ‰å·¥ç¨‹äº§ç”Ÿå½±å“ï¼Œå¦‚ä¸èˆ¬é¡ºæ»‘</li> <li><strong>æŸè€—å°</strong>ï¼šå¯åŠ¨å³ä¼š<strong>è‡ªåŠ¨æ³¨å…¥åŸºæœ¬ CURD</strong>ï¼Œæ€§èƒ½åŸºæœ¬æ— æŸè€—ï¼Œç›´æ¥é¢å‘å¯¹è±¡æ“ä½œï¼ŒBasemapperè‡ªåŠ¨ç”Ÿäº§å¯¹åº”çš„crudæ“ä½œã€‚</li> <li><strong>å¼ºå¤§çš„ CRUD æ“ä½œ</strong>ï¼š<strong>å†…ç½®é€šç”¨ Mapperã€é€šç”¨ Service</strong>ï¼Œä»…ä»…é€šè¿‡<strong>å°‘é‡é…ç½®å³å¯å®ç°å•è¡¨å¤§éƒ¨åˆ† CRUD æ“ä½œ</strong>ï¼Œæ›´æœ‰å¼ºå¤§çš„æ¡ä»¶æ„é€ å™¨ï¼Œæ»¡è¶³å„ç±»ä½¿ç”¨éœ€æ±‚</li> <li><strong>æ”¯æŒ Lambda å½¢å¼è°ƒç”¨</strong>ï¼šé€šè¿‡ Lambda è¡¨è¾¾å¼ï¼Œæ–¹ä¾¿çš„ç¼–å†™å„ç±»æŸ¥è¯¢æ¡ä»¶ï¼Œæ— éœ€å†æ‹…å¿ƒå­—æ®µå†™é”™</li> <li><strong>æ”¯æŒä¸»é”®è‡ªåŠ¨ç”Ÿæˆ</strong>ï¼šæ”¯æŒå¤šè¾¾ 4 ç§ä¸»é”®ç­–ç•¥ï¼ˆå†…å«<strong>åˆ†å¸ƒå¼å”¯ä¸€ ID ç”Ÿæˆå™¨</strong> - Sequenceï¼‰ï¼Œå¯è‡ªç”±é…ç½®ï¼Œå®Œç¾è§£å†³ä¸»é”®é—®é¢˜</li> <li><strong>æ”¯æŒ ActiveRecord æ¨¡å¼</strong>ï¼šæ”¯æŒ ActiveRecord å½¢å¼è°ƒç”¨ï¼Œå®ä½“ç±»åªéœ€ç»§æ‰¿ Model ç±»å³å¯è¿›è¡Œå¼ºå¤§çš„ CRUD æ“ä½œ</li> <li><strong>æ”¯æŒè‡ªå®šä¹‰å…¨å±€é€šç”¨æ“ä½œ</strong>ï¼šæ”¯æŒå…¨å±€é€šç”¨æ–¹æ³•æ³¨å…¥ï¼ˆ Write once, use anywhere ï¼‰</li> <li><strong>å†…ç½®ä»£ç ç”Ÿæˆå™¨</strong>ï¼šé‡‡ç”¨ä»£ç æˆ–è€… Maven æ’ä»¶å¯<strong>å¿«é€Ÿç”Ÿæˆ Mapper ã€ Model ã€ Service ã€ Controller å±‚ä»£ç </strong>ï¼Œæ”¯æŒæ¨¡æ¿å¼•æ“ï¼Œæ›´æœ‰è¶…å¤šè‡ªå®šä¹‰é…ç½®ç­‰æ‚¨æ¥ä½¿ç”¨</li> <li><strong>å†…ç½®åˆ†é¡µæ’ä»¶</strong>ï¼š<strong>åŸºäºMyBatis ç‰©ç†åˆ†é¡µ</strong>ï¼Œå¼€å‘è€…æ— éœ€å…³å¿ƒå…·ä½“æ“ä½œï¼Œé…ç½®å¥½æ’ä»¶ä¹‹åï¼Œå†™åˆ†é¡µç­‰åŒäºæ™®é€š List æŸ¥è¯¢ï¼Œä¸éœ€è¦ç”¨page-helperäº†ã€‚</li> <li><strong>åˆ†é¡µæ’ä»¶æ”¯æŒå¤šç§æ•°æ®åº“</strong>ï¼šæ”¯æŒ MySQLã€MariaDBã€Oracleã€DB2ã€H2ã€HSQLã€SQLiteã€Postgreã€SQLServer ç­‰å¤šç§æ•°æ®åº“</li> <li><strong>å†…ç½®æ€§èƒ½åˆ†ææ’ä»¶</strong>ï¼šå¯è¾“å‡º SQL è¯­å¥ä»¥åŠå…¶æ‰§è¡Œæ—¶é—´ï¼Œå»ºè®®å¼€å‘æµ‹è¯•æ—¶å¯ç”¨è¯¥åŠŸèƒ½ï¼Œèƒ½å¿«é€Ÿæªå‡ºæ…¢æŸ¥è¯¢</li> <li><strong>å†…ç½®å…¨å±€æ‹¦æˆªæ’ä»¶</strong>ï¼šæä¾›å…¨è¡¨ delete ã€ update æ“ä½œæ™ºèƒ½åˆ†æé˜»æ–­ï¼Œä¹Ÿå¯è‡ªå®šä¹‰æ‹¦æˆªè§„åˆ™ï¼Œé¢„é˜²è¯¯æ“ä½œ</li></ul> <h2 id="_2-å¿«é€Ÿå…¥é—¨"><a href="#_2-å¿«é€Ÿå…¥é—¨" class="header-anchor">#</a> 2 å¿«é€Ÿå…¥é—¨</h2> <p>ä½¿ç”¨ç¬¬ä¸‰æ–¹ç»„ä»¶ï¼š</p> <p>1ã€å¯¼å…¥ç›¸åº”çš„ä¾èµ–</p> <p>2ã€ç ”ç©¶ä¾èµ–å¦‚ä½•é…ç½®</p> <p>3ã€ä»£ç å¦‚ä½•ç¼–å†™</p> <p>4ã€æé«˜æ‰©å±•æŠ€æœ¯èƒ½åŠ›</p> <h3 id="_2-1-åˆ›å»ºæ•°æ®åº“mybatis-plus"><a href="#_2-1-åˆ›å»ºæ•°æ®åº“mybatis-plus" class="header-anchor">#</a> 2.1 åˆ›å»ºæ•°æ®åº“mybatis_plus</h3> <h3 id="_2-2-åˆ›å»ºuserè¡¨"><a href="#_2-2-åˆ›å»ºuserè¡¨" class="header-anchor">#</a> 2.2 åˆ›å»ºuserè¡¨</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token keyword">user</span><span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">user</span>
<span class="token punctuation">(</span>
    id <span class="token keyword">BIGINT</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'ä¸»é”®ID'</span><span class="token punctuation">,</span>
    name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'å§“å'</span><span class="token punctuation">,</span>
    age <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'å¹´é¾„'</span><span class="token punctuation">,</span>
    email <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'é‚®ç®±'</span><span class="token punctuation">,</span>
    <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> email<span class="token punctuation">)</span> <span class="token keyword">VALUES</span>
<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'Jone'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">'test1@baomidou.com'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'Jack'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">'test2@baomidou.com'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'Tom'</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token string">'test3@baomidou.com'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'Sandy'</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token string">'test4@baomidou.com'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'Billie'</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token string">'test5@baomidou.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- çœŸæ˜¯å¼€å‘ä¸­ï¼Œversionï¼ˆä¹è§‚é”ï¼‰ã€deletedï¼ˆé€»è¾‘åˆ é™¤ï¼‰ã€gmt_createã€gmt_modified</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="_2-3-æ–°å»ºé¡¹ç›®mybatis-plus"><a href="#_2-3-æ–°å»ºé¡¹ç›®mybatis-plus" class="header-anchor">#</a> 2.3 æ–°å»ºé¡¹ç›®mybatis_plus</h3> <h3 id="_2-4-å¯¼å…¥ä¾èµ–"><a href="#_2-4-å¯¼å…¥ä¾èµ–" class="header-anchor">#</a> 2.4 å¯¼å…¥ä¾èµ–</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token comment">--web--&gt;</span>
<span class="token operator">&lt;</span>dependency<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>groupId<span class="token operator">&gt;</span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>artifactId<span class="token operator">&gt;</span>spring<span class="token operator">-</span>boot<span class="token operator">-</span>starter<span class="token operator">-</span>web<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token comment">--æ•°æ®åº“--&gt;</span>
<span class="token operator">&lt;</span>dependency<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>groupId<span class="token operator">&gt;</span>mysql<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>artifactId<span class="token operator">&gt;</span>mysql<span class="token operator">-</span>connector<span class="token operator">-</span>java<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token comment">--lombok--&gt;</span>
<span class="token operator">&lt;</span>dependency<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>groupId<span class="token operator">&gt;</span>org<span class="token punctuation">.</span>projectlombok<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>artifactId<span class="token operator">&gt;</span>lombok<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token comment">--mybatis-plus,ä¸æ˜¯å®˜æ–¹çš„--&gt;</span>
<span class="token operator">&lt;</span>dependency<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>groupId<span class="token operator">&gt;</span>com<span class="token punctuation">.</span>baomidou<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>artifactId<span class="token operator">&gt;</span>mybatis<span class="token operator">-</span>plus<span class="token operator">-</span>boot<span class="token operator">-</span>starter<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span><span class="token number">3.0</span><span class="token number">.5</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>è¯´æ˜ï¼šä½¿ç”¨mybatis-pluså¯ä»¥èŠ‚çœå¤§é‡çš„ä»£ç ï¼Œä¸è¦åŒæ—¶å¯¼å…¥mybatiså’Œmybatis-plus</p> <h3 id="_2-5-è¿æ¥æ•°æ®åº“-é…ç½®"><a href="#_2-5-è¿æ¥æ•°æ®åº“-é…ç½®" class="header-anchor">#</a> 2.5 è¿æ¥æ•°æ®åº“-é…ç½®</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># åº”ç”¨åç§°</span>
spring<span class="token punctuation">.</span>application<span class="token punctuation">.</span>name<span class="token operator">=</span>mybatis_plus
<span class="token comment"># åº”ç”¨æœåŠ¡ WEB è®¿é—®ç«¯å£</span>
server<span class="token punctuation">.</span>port<span class="token operator">=</span><span class="token number">8080</span>
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>username<span class="token operator">=</span>root
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>password<span class="token operator">=</span><span class="token number">1234</span>
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>url<span class="token operator">=</span>jdbc:mysql:<span class="token comment">//localhost:3306/mybatis_plus?useSSL=false&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=GMT%2B8</span>
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>driver<span class="token operator">-</span>class<span class="token operator">-</span>name<span class="token operator">=</span>com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>Driver
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_2-6-pojo-dao-service-controller"><a href="#_2-6-pojo-dao-service-controller" class="header-anchor">#</a> 2.6 pojo-dao-service-controller</h3> <p>ä¼ ç»Ÿæ–¹å¼daoéœ€è¦é…ç½®mapper.xml</p> <p>ç°åœ¨æ­¥éª¤ï¼š</p> <p>1.pojo</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">public</span> class <span class="token keyword">User</span> {

    private Long id<span class="token punctuation">;</span>
    private String name<span class="token punctuation">;</span>
    private <span class="token keyword">Integer</span> age<span class="token punctuation">;</span>
    private String email<span class="token punctuation">;</span>
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>2.mapperæ¥å£</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">/**
 * @author éƒ­å®‡èˆª
 * @date 2022/1/4
 * @apiNote ä½¿ç”¨mybatis-pluså,åªéœ€è¦å®ç°åŸºæœ¬çš„æ¥å£BaseMapper
 */</span>
<span class="token comment">// Repositoryè¡¨ç¤ºä¸ºdaoå±‚çš„å°±å¯ä»¥äº†</span>
<span class="token variable">@Repository</span>
<span class="token keyword">public</span> interface UserMapper extends BaseMapper<span class="token operator">&lt;</span><span class="token keyword">User</span><span class="token operator">&gt;</span> {
    <span class="token comment">//æ‰€æœ‰çš„CRUDéƒ½å·²ç»è‡ªåŠ¨ç”Ÿæˆäº†ã€‚</span>
    <span class="token comment">//ä¸éœ€è¦åƒä»¥å‰é‚£æ ·é…ç½®ä¸€å¤§å †æ–‡ä»¶é‡Œ</span>
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>3.main</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">//æ‰«æmapperæ¥å£</span>
<span class="token variable">@MapperScan</span><span class="token punctuation">(</span><span class="token string">&quot;com.kuang.mapper&quot;</span><span class="token punctuation">)</span>
<span class="token variable">@SpringBootApplication</span>
<span class="token keyword">public</span> class MybatisPlusApplication {

    <span class="token keyword">public</span> static void main<span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> {
        SpringApplication<span class="token punctuation">.</span>run<span class="token punctuation">(</span>MybatisPlusApplication<span class="token punctuation">.</span>class<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    }

}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>4.ä½¿ç”¨</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">/**
 * åŸºç¡€äº†BaseMapperï¼Œæ‰€æœ‰çš„æ–¹æ³•éƒ½æ¥è‡ªçˆ¶ç±»
 */</span>
<span class="token variable">@Autowired</span>
private UserMapper userMapper<span class="token punctuation">;</span>

<span class="token variable">@Test</span>
void contextLoads<span class="token punctuation">(</span><span class="token punctuation">)</span> {
    <span class="token comment">// æŸ¥è¯¢å…¨éƒ¨ç”¨æˆ·</span>
    <span class="token comment">// å‚æ•°æ˜¯ä¸€ä¸ªwapperï¼Œä¸€ä¸ªæ¡ä»¶æ„é€ å™¨</span>
    List<span class="token operator">&lt;</span><span class="token keyword">User</span><span class="token operator">&gt;</span> users <span class="token operator">=</span> userMapper<span class="token punctuation">.</span>selectList<span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    users<span class="token punctuation">.</span>forEach<span class="token punctuation">(</span>System<span class="token punctuation">.</span><span class="token keyword">out</span>::println<span class="token punctuation">)</span><span class="token punctuation">;</span>
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>æ³¨æ„ï¼šéœ€è¦åœ¨ä¸»å¯åŠ¨ç±»æ·»åŠ <code>@MapperScan*(*&quot;com.kuang.mapper&quot;*)*</code></p> <p>æ€è€ƒé—®é¢˜ï¼š
1.SQLè°å†™çš„ï¼ŸMybatis-Plus
2.æ–¹æ³•å“ªé‡Œæ¥çš„ï¼ŸMybatis-Plus</p> <h2 id="_3-é…ç½®æ—¥å¿—"><a href="#_3-é…ç½®æ—¥å¿—" class="header-anchor">#</a> 3 é…ç½®æ—¥å¿—</h2> <p>å› ä¸ºæ‰€æœ‰çš„sqlæ˜¯ä¸å¯è§çš„ï¼Œå¸Œæœ›çŸ¥é“ä»–æ˜¯æ€ä¹ˆæ‰§è¡Œçš„ ï¼Œå¿…é¡»çœ‹æ—¥å¿—ï¼</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">#é…ç½®æ—¥å¿—</span>
mybatis<span class="token operator">-</span>plus<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span>log<span class="token operator">-</span>impl<span class="token operator">=</span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>logging<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>StdOutImpl
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/assets/img/Untitled.ee9b4532.png" alt="Untitled"></p> <p>é…ç½®å®Œä¹‹åï¼Œåé¢çš„æ—¥å¿—éœ€è¦æ³¨æ„è¿™ä¸ªè‡ªåŠ¨ç”Ÿäº§çš„SQLï¼Œä¼šå–œæ¬¢ä¸ŠMybatis-</p> <h2 id="_4-crudæ‰©å±•"><a href="#_4-crudæ‰©å±•" class="header-anchor">#</a> 4 CRUDæ‰©å±•</h2> <h3 id="_4-1-æ’å…¥"><a href="#_4-1-æ’å…¥" class="header-anchor">#</a> 4.1 æ’å…¥</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token variable">@Test</span>
    void contextLoads2<span class="token punctuation">(</span><span class="token punctuation">)</span> {
        <span class="token keyword">User</span> <span class="token keyword">user</span> <span class="token operator">=</span> new <span class="token keyword">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">user</span><span class="token punctuation">.</span>setName<span class="token punctuation">(</span><span class="token string">&quot;æµ‹è¯•&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">user</span><span class="token punctuation">.</span>setAge<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">user</span><span class="token punctuation">.</span>setEmail<span class="token punctuation">(</span><span class="token string">&quot;15512702732@163.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ’å…¥</span>
        <span class="token keyword">int</span> <span class="token keyword">insert</span> <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token keyword">insert</span><span class="token punctuation">(</span><span class="token keyword">user</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span><span class="token keyword">out</span><span class="token punctuation">.</span>println<span class="token punctuation">(</span><span class="token keyword">insert</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span><span class="token keyword">out</span><span class="token punctuation">.</span>println<span class="token punctuation">(</span><span class="token keyword">user</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><img src="/assets/img/Untitled1.de71ebe7.png" alt="Untitled"></p> <p>å¸®æˆ‘ä»¬è‡ªåŠ¨ç”Ÿäº§äº†idï¼Œå¹¶ä¸”idä¼šè‡ªåŠ¨å›å¡«åˆ°userå¯¹è±¡ä¸­ã€‚</p> <p>æ•°æ®åº“é»˜è®¤æ’å…¥çš„æ˜¯å”¯ä¸€é»˜è®¤å€¼ï¼Œä¸ºä»€ä¹ˆè¿™é‡Œè‡ªåŠ¨ç”Ÿæˆçš„æ˜¯1478268198860804098</p> <p><strong>é»˜è®¤æ³¨è§£ç­–ç•¥ï¼š<code>@TableId*(*type = IdType.*ID_WORKER)*</code></strong></p> <p><strong>1ã€ä¸»é”®è‡ªå¢ç­–ç•¥ï¼š<em><code>AUTO</code></em></strong></p> <p>1.å®ä½“ç±»å­—æ®µä¸Šå¢åŠ <code>@TableId*(*type = IdType.*AUTO)*</code></p> <p>2.æ•°æ®åº“ä¸­é…ç½®ä¸ºè‡ªå¢ï¼</p> <p>3.æµ‹è¯•æ’å…¥</p> <p>User(id=1478268198860804099, name=æµ‹è¯•, age=3, <a href="mailto:email=15512702732@163.com">email=15512702732@163.com</a>)</p> <p><strong>2ã€å…¶ä»–ç­–ç•¥ï¼š</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>AUTO<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> è‡ªå¢
NONE<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> æœªè®¾ç½®ä¸»é”®
INPUT<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> æ‰‹åŠ¨è¾“å…¥<span class="token punctuation">,</span>å¿…é¡»è¦è‡ªå·±å†™id
ID_WORKER<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  é»˜è®¤å…¨å±€å”¯ä¸€id
UUID<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  å…¨å±€å”¯ä¸€id uuid
ID_WORKER_STR<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> id_workerå­—ç¬¦ä¸²è¡¨ç¤ºæ³•
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_4-2-æ›´æ–°"><a href="#_4-2-æ›´æ–°" class="header-anchor">#</a> 4.2 æ›´æ–°</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token variable">@Test</span>
void contextLoads3<span class="token punctuation">(</span><span class="token punctuation">)</span> {
    <span class="token keyword">User</span> <span class="token keyword">user</span> <span class="token operator">=</span> new <span class="token keyword">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">user</span><span class="token punctuation">.</span>setId<span class="token punctuation">(</span><span class="token number">1478268198860804099</span>L<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">user</span><span class="token punctuation">.</span>setName<span class="token punctuation">(</span><span class="token string">&quot;æµ‹è¯•&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">user</span><span class="token punctuation">.</span>setAge<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">user</span><span class="token punctuation">.</span>setEmail<span class="token punctuation">(</span><span class="token string">&quot;15512702732@163.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// æ›´æ–°,å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡</span>
    <span class="token keyword">int</span> <span class="token keyword">insert</span> <span class="token operator">=</span> userMapper<span class="token punctuation">.</span>updateById<span class="token punctuation">(</span><span class="token keyword">user</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    System<span class="token punctuation">.</span><span class="token keyword">out</span><span class="token punctuation">.</span>println<span class="token punctuation">(</span><span class="token keyword">insert</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    System<span class="token punctuation">.</span><span class="token keyword">out</span><span class="token punctuation">.</span>println<span class="token punctuation">(</span><span class="token keyword">user</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>é€šè¿‡æ¡ä»¶è‡ªåŠ¨æ‹¼æ¥äº†åŠ¨æ€sqlï¼š</p> <p><img src="/assets/img/Untitled2.0241cd2c.png" alt="Untitled"></p> <h3 id="_4-3-è‡ªåŠ¨åŒ–å¡«å……æ—¶é—´å­—æ®µ"><a href="#_4-3-è‡ªåŠ¨åŒ–å¡«å……æ—¶é—´å­—æ®µ" class="header-anchor">#</a> 4.3 è‡ªåŠ¨åŒ–å¡«å……æ—¶é—´å­—æ®µ</h3> <p><a href="https://baomidou.com/pages/4c6bcf/" target="_blank" rel="noopener noreferrer">https://baomidou.com/pages/4c6bcf/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>æ¯”å¦‚ï¼šåˆ›å»ºæ—¶é—´ã€ä¿®æ”¹æ—¶é—´ï¼è¿™äº›æ“ä½œ.</p> <p>alibabaè§„å®šæ‰€æœ‰çš„æ•°æ®åº“è¡¨å¿…é¡»åŒ…å«2ä¸ªå­—æ®µï¼šgmt_createã€gmt_modifiedï¼Œè¿™ä¸¤ä¸ªå­—æ®µå‡ ä¹æ‰€æœ‰çš„è¡¨éƒ½è¦é…ç½®ä¸Šï¼Œè€Œä¸”éœ€è¦è‡ªåŠ¨åŒ–ï¼</p> <p><strong>ä¸¤ä¸­æ–¹å¼ï¼š</strong></p> <p>æ–¹æ³•ä¸€ã€æ•°æ®åº“çº§åˆ«(å·¥ä½œä¸­ä¸å…è®¸ä½¿ç”¨)</p> <p>1ã€æ–°å¢å­—æ®µcreate_time/update_time</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>mybatis_plus<span class="token punctuation">`</span></span><span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>user<span class="token punctuation">`</span></span> 
<span class="token keyword">ADD</span> <span class="token keyword">COLUMN</span> <span class="token identifier"><span class="token punctuation">`</span>create_time<span class="token punctuation">`</span></span> <span class="token keyword">DATETIME</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token keyword">AFTER</span> <span class="token identifier"><span class="token punctuation">`</span>email<span class="token punctuation">`</span></span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>2ã€æµ‹è¯•æ’å…¥æ–¹æ³•ï¼ŒåŒæ­¥å®ä½“ç±»</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">public</span> class <span class="token keyword">User</span> {

    private Long id<span class="token punctuation">;</span>
    private String name<span class="token punctuation">;</span>
    private <span class="token keyword">Integer</span> age<span class="token punctuation">;</span>
    private String email<span class="token punctuation">;</span>
    <span class="token operator">*</span><span class="token operator">*</span>private <span class="token keyword">Date</span> createTime<span class="token punctuation">;</span><span class="token operator">*</span><span class="token operator">*</span>
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>æ–¹æ³•äºŒã€ä»£ç çº§åˆ«</p> <p>1ã€åˆ é™¤æ•°æ®åº“çš„é»˜è®¤å€¼</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>mybatis_plus<span class="token punctuation">`</span></span><span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>user<span class="token punctuation">`</span></span> 
CHANGE <span class="token keyword">COLUMN</span> <span class="token identifier"><span class="token punctuation">`</span>create_time<span class="token punctuation">`</span></span> <span class="token identifier"><span class="token punctuation">`</span>create_time<span class="token punctuation">`</span></span> <span class="token keyword">DATETIME</span> <span class="token boolean">NULL</span> <span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>2ã€å®ä½“ç±»çš„å±æ€§ä¸Šéœ€è¦å¢åŠ æ³¨è§£-mybatispluså®ç°çš„</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">public</span> class <span class="token keyword">User</span> {

    private Long id<span class="token punctuation">;</span>
    private String name<span class="token punctuation">;</span>
    private <span class="token keyword">Integer</span> age<span class="token punctuation">;</span>
    private String email<span class="token punctuation">;</span>
    <span class="token operator">*</span><span class="token operator">*</span><span class="token variable">@TableField</span><span class="token punctuation">(</span>fill <span class="token operator">=</span> FieldFill<span class="token punctuation">.</span>INSERT_UPDATE<span class="token punctuation">)</span>
    private <span class="token keyword">Date</span> createTime<span class="token punctuation">;</span><span class="token operator">*</span><span class="token operator">*</span>

}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>3ã€ç¼–å†™å¤„ç†å™¨å¤„ç†æ³¨è§£</p> <p>mybatis pluså·²ç»æœ‰äº†ç›¸åº”çš„æ¥å£,å®ç°å¤„ç†å™¨æ¥å£ï¼Œå¹¶ç¼–å†™æ’å…¥å’Œæ›´æ–°æ—¶çš„æ–¹æ³•ï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token variable">@Component</span> <span class="token comment">// ä¸€å®šä¸è¦å¿˜äº†æŠŠå¤„ç†å™¨æ·»åŠ åˆ°Beanä¸­</span>
<span class="token variable">@Slf4j</span>
<span class="token keyword">public</span> class TimeMetaObjectHandler implements MetaObjectHandler {
    <span class="token comment">/**
     * æ’å…¥æ—¶çš„å¡«å……ç­–ç•¥
     * @param metaObject
     */</span>
    <span class="token variable">@Override</span>
    <span class="token keyword">public</span> void insertFill<span class="token punctuation">(</span>MetaObject metaObject<span class="token punctuation">)</span> {
        log<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">&quot;start insert fill ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// String fieldName, Object fieldVal, MetaObject metaObject</span>
        this<span class="token punctuation">.</span>setFieldValByName<span class="token punctuation">(</span><span class="token string">&quot;createTime&quot;</span><span class="token punctuation">,</span> new <span class="token keyword">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> metaObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
    }

    <span class="token comment">/**
     * æ›´æ–°æ—¶çš„å¡«å……ç­–ç•¥
     * @param metaObject
     */</span>
    <span class="token variable">@Override</span>
    <span class="token keyword">public</span> void updateFill<span class="token punctuation">(</span>MetaObject metaObject<span class="token punctuation">)</span> {
        log<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">&quot;start update fill ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        this<span class="token punctuation">.</span>setFieldValByName<span class="token punctuation">(</span><span class="token string">&quot;createTime&quot;</span><span class="token punctuation">,</span> new <span class="token keyword">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> metaObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>4ã€æµ‹è¯•æ’å…¥ï¼Œè§‚å¯Ÿæ—¶é—´</p> <p><img src="/assets/img/Untitled3.927524f7.png" alt="Untitled"></p> <h3 id="_4-4-ä¹è§‚é”"><a href="#_4-4-ä¹è§‚é”" class="header-anchor">#</a> 4.4 ä¹è§‚é”</h3> <p>åœ¨é¢è¯•ä¸­ï¼Œç»å¸¸è¢«é—»åˆ°ä¹è§‚é”ï¼Œæ‚²è§‚é”ï¼jucè¯¾ç¨‹ä¸­è®²äº†ã€‚</p> <aside>
ğŸ’¡ **ä¹è§‚é”ï¼š**é¡¾åæ€ä¹‰ååˆ†ä¹è§‚ï¼Œæ€»æ˜¯è®¤ä¸ºä¸ä¼šå‡ºç°é—®é¢˜ï¼Œæ— è®ºå¹²ä»€ä¹ˆéƒ½ä¸å»ä¸Šé”ï¼å¦‚æœå‡ºç°äº†é—®é¢˜ï¼Œå†æ¬¡æ›´æ–°å€¼åé‡è¯•ã€‚ä¸€èˆ¬ä½¿ç”¨versionå’Œnew versionå­—æ®µã€‚åˆ¤æ–­ç‰ˆæœ¬å·æ˜¯å¦æ›´æ–°äº†ï¼Œæ¥ç¡®å®šè¿™ä¸ªæ•°æ®åˆ°åº•æœ‰æ²¡æœ‰æ›´æ–°ã€‚
**æ‚²è§‚é”ï¼š**ååˆ†æ‚²è§‚ï¼Œè®¤ä¸ºæ€»æ˜¯ä¼šå‡ºç°é—®é¢˜ï¼Œæ— è®ºå¹²ä»€ä¹ˆéƒ½ä¼šä¸Šé”ï¼å†æ“ä½œã€‚
</aside> <p><strong>è®²è§£ä¹è§‚é”æœºåˆ¶ï¼š</strong></p> <p><a href="https://baomidou.com/pages/0d93c0/#optimisticlockerinnerinterceptor" target="_blank" rel="noopener noreferrer">https://baomidou.com/pages/0d93c0/#optimisticlockerinnerinterceptor<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>å½“è¦æ›´æ–°ä¸€æ¡è®°å½•çš„æ—¶å€™ï¼Œå¸Œæœ›è¿™æ¡è®°å½•æ²¡æœ‰è¢«åˆ«äººæ›´æ–°ä¹è§‚é”å®ç°æ–¹å¼ï¼š</p> <blockquote><p>å–å‡ºè®°å½•æ—¶ï¼Œè·å–å½“å‰ version
æ›´æ–°æ—¶ï¼Œå¸¦ä¸Šè¿™ä¸ª version
æ‰§è¡Œæ›´æ–°æ—¶ï¼Œ set version = newVersion where version = oldVersion
å¦‚æœ version ä¸å¯¹ï¼Œå°±æ›´æ–°å¤±è´¥</p></blockquote> <p>æ­¥éª¤ï¼š</p> <p>1ã€å…ˆæŸ¥è¯¢è·å–ç‰ˆæœ¬å·</p> <p>2ã€æ›´æ–°æ—¶æ¡ä»¶å¸¦ä¸Šåˆšåœ¨å–å¾—çš„ç‰ˆæœ¬å·ï¼Œåªæœ‰ç›¸åŒæ—¶æ‰èƒ½æ‰§è¡ŒæˆåŠŸã€‚</p> <p>3ã€æ›´æ–°ç‰ˆæœ¬å·æ•°æ®æ—¶è¦æŠŠç‰ˆæœ¬å·+1ã€‚</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">update</span> <span class="token keyword">user</span> <span class="token keyword">set</span> name <span class="token operator">=</span> <span class="token string">&quot;kuang&quot;</span><span class="token punctuation">,</span> version <span class="token operator">=</span> version<span class="token operator">+</span><span class="token number">1</span>
<span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">and</span> version <span class="token operator">=</span> <span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>æµ‹è¯•mybatis-plusä¹è§‚é”æ’ä»¶ï¼š</strong></p> <p>1ã€å¢åŠ versionå­—æ®µ</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>mybatis_plus<span class="token punctuation">`</span></span><span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>user<span class="token punctuation">`</span></span> 
<span class="token keyword">ADD</span> <span class="token keyword">COLUMN</span> <span class="token identifier"><span class="token punctuation">`</span>version<span class="token punctuation">`</span></span> <span class="token keyword">INT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token number">1</span> <span class="token keyword">AFTER</span> <span class="token identifier"><span class="token punctuation">`</span>create_time<span class="token punctuation">`</span></span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>2ã€æ›´æ–°pojo</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token variable">@Version</span> <span class="token comment">//ä¹è§‚é”æ³¨è§£</span>
private <span class="token keyword">Integer</span> version<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>3ã€æ³¨å†Œç»„ä»¶</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token variable">@Bean</span>
<span class="token keyword">public</span> OptimisticLockerInterceptor optimisticLockerInterceptor<span class="token punctuation">(</span><span class="token punctuation">)</span> {
    <span class="token keyword">return</span> new OptimisticLockerInterceptor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>4ã€æµ‹è¯•æˆåŠŸçš„æ¡ˆä¾‹ï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token variable">@Test</span>
void contextLoads4<span class="token punctuation">(</span><span class="token punctuation">)</span> {
    <span class="token comment">// æµ‹è¯•ä¹è§‚é”æˆåŠŸï¼</span>
    <span class="token comment">// 1.æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</span>
    <span class="token keyword">User</span> <span class="token keyword">user</span> <span class="token operator">=</span> userMapper<span class="token punctuation">.</span>selectById<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 2.ä¿®æ”¹</span>
    <span class="token keyword">user</span><span class="token punctuation">.</span>setName<span class="token punctuation">(</span><span class="token string">&quot;123123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 3.æ‰§è¡Œæ›´æ–°ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡</span>
    <span class="token keyword">int</span> updateById <span class="token operator">=</span> userMapper<span class="token punctuation">.</span>updateById<span class="token punctuation">(</span><span class="token keyword">user</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    System<span class="token punctuation">.</span><span class="token keyword">out</span><span class="token punctuation">.</span>println<span class="token punctuation">(</span>updateById<span class="token punctuation">)</span><span class="token punctuation">;</span>
    System<span class="token punctuation">.</span><span class="token keyword">out</span><span class="token punctuation">.</span>println<span class="token punctuation">(</span><span class="token keyword">user</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>ç»“æœï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>Creating a new SqlSession
SqlSession <span class="token punctuation">[</span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span><span class="token keyword">session</span><span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>DefaultSqlSession<span class="token variable">@7b6c6e70</span><span class="token punctuation">]</span> was <span class="token operator">not</span> registered <span class="token keyword">for</span> synchronization because synchronization <span class="token operator">is</span> <span class="token operator">not</span> active
JDBC Connection <span class="token punctuation">[</span>HikariProxyConnection<span class="token variable">@437098149</span> wrapping com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>ConnectionImpl<span class="token variable">@5a02bfe3</span><span class="token punctuation">]</span> will <span class="token operator">not</span> be managed <span class="token keyword">by</span> Spring
<span class="token operator">=</span><span class="token operator">=</span><span class="token operator">&gt;</span>  Preparing: <span class="token keyword">SELECT</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>email<span class="token punctuation">,</span>version<span class="token punctuation">,</span>create_time <span class="token keyword">FROM</span> <span class="token keyword">user</span> <span class="token keyword">WHERE</span> id<span class="token operator">=</span>? 
<span class="token operator">=</span><span class="token operator">=</span><span class="token operator">&gt;</span> Parameters: <span class="token number">1</span><span class="token punctuation">(</span><span class="token keyword">Integer</span><span class="token punctuation">)</span>
<span class="token operator">&lt;=</span><span class="token operator">=</span>    <span class="token keyword">Columns</span>: id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> email<span class="token punctuation">,</span> version<span class="token punctuation">,</span> create_time
<span class="token operator">&lt;=</span><span class="token operator">=</span>        <span class="token keyword">Row</span>: <span class="token number">1</span><span class="token punctuation">,</span> Jone<span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> test1<span class="token variable">@baomidou.com</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token operator">*</span><span class="token number">1</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">,</span> <span class="token number">2022</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">04</span> <span class="token number">15</span>:<span class="token number">59</span>:<span class="token number">26</span>
<span class="token operator">&lt;=</span><span class="token operator">=</span>      Total: <span class="token number">1</span>
Closing non transactional SqlSession <span class="token punctuation">[</span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span><span class="token keyword">session</span><span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>DefaultSqlSession<span class="token variable">@7b6c6e70</span><span class="token punctuation">]</span>
Creating a new SqlSession
SqlSession <span class="token punctuation">[</span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span><span class="token keyword">session</span><span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>DefaultSqlSession<span class="token variable">@123d7057</span><span class="token punctuation">]</span> was <span class="token operator">not</span> registered <span class="token keyword">for</span> synchronization because synchronization <span class="token operator">is</span> <span class="token operator">not</span> active
<span class="token number">2022</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">04</span> <span class="token number">16</span>:<span class="token number">33</span>:<span class="token number">14.438</span>  INFO <span class="token number">13096</span> <span class="token comment">--- [           main] com.kuang.handler.TimeMetaObjectHandler  : start update fill ...</span>
JDBC Connection <span class="token punctuation">[</span>HikariProxyConnection<span class="token variable">@541769471</span> wrapping com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>ConnectionImpl<span class="token variable">@5a02bfe3</span><span class="token punctuation">]</span> will <span class="token operator">not</span> be managed <span class="token keyword">by</span> Spring
<span class="token operator">=</span><span class="token operator">=</span><span class="token operator">&gt;</span>  Preparing: <span class="token keyword">UPDATE</span> <span class="token keyword">user</span> <span class="token keyword">SET</span> name<span class="token operator">=</span>?<span class="token punctuation">,</span> age<span class="token operator">=</span>?<span class="token punctuation">,</span> email<span class="token operator">=</span>?<span class="token punctuation">,</span> version<span class="token operator">=</span>?<span class="token punctuation">,</span> create_time<span class="token operator">=</span>? <span class="token keyword">WHERE</span> id<span class="token operator">=</span>? <span class="token operator">AND</span> version<span class="token operator">=</span>? 
<span class="token operator">=</span><span class="token operator">=</span><span class="token operator">&gt;</span> Parameters: <span class="token number">123123</span><span class="token punctuation">(</span>String<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">(</span><span class="token keyword">Integer</span><span class="token punctuation">)</span><span class="token punctuation">,</span> test1<span class="token variable">@baomidou.com</span><span class="token punctuation">(</span>String<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">(</span><span class="token keyword">Integer</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2022</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">04</span> <span class="token number">16</span>:<span class="token number">33</span>:<span class="token number">14.438</span><span class="token punctuation">(</span><span class="token keyword">Timestamp</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">(</span><span class="token keyword">Integer</span><span class="token punctuation">)</span>
<span class="token operator">&lt;=</span><span class="token operator">=</span>    Updates: <span class="token number">1</span>
Closing non transactional SqlSession <span class="token punctuation">[</span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span><span class="token keyword">session</span><span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>DefaultSqlSession<span class="token variable">@123d7057</span><span class="token punctuation">]</span>
<span class="token number">1</span>
<span class="token keyword">User</span><span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token number">123123</span><span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">18</span><span class="token punctuation">,</span> email<span class="token operator">=</span>test1<span class="token variable">@baomidou.com</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token operator">*</span>version<span class="token operator">=</span><span class="token number">2</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">,</span> createTime<span class="token operator">=</span>Tue Jan <span class="token number">04</span> <span class="token number">15</span>:<span class="token number">59</span>:<span class="token number">26</span> CST <span class="token number">2022</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>5ã€æµ‹è¯•å¤±è´¥çš„æ¡ˆä¾‹ï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token variable">@Test</span>
void contextLoads5<span class="token punctuation">(</span><span class="token punctuation">)</span> {
    <span class="token comment">// æµ‹è¯•ä¹è§‚é”å¤±è´¥ï¼</span>
    <span class="token comment">// çº¿ç¨‹1</span>
    <span class="token comment">// 1.1.æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</span>
    <span class="token keyword">User</span> <span class="token keyword">user</span> <span class="token operator">=</span> userMapper<span class="token punctuation">.</span>selectById<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 1.2.ä¿®æ”¹</span>
    <span class="token keyword">user</span><span class="token punctuation">.</span>setName<span class="token punctuation">(</span><span class="token string">&quot;123123111111111&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// çº¿ç¨‹2</span>
    <span class="token comment">// 2.1.æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</span>
    <span class="token keyword">User</span> user2 <span class="token operator">=</span> userMapper<span class="token punctuation">.</span>selectById<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 2.2.ä¿®æ”¹</span>
    user2<span class="token punctuation">.</span>setName<span class="token punctuation">(</span><span class="token string">&quot;123123222222222&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 2.3.æ‰§è¡Œæ›´æ–°ç¬¬äºŒä¸ªçº¿ç¨‹ï¼Œæ’é˜Ÿäº†æŠ¢å…ˆçº¿ç¨‹1æ›´æ–°</span>
    userMapper<span class="token punctuation">.</span>updateById<span class="token punctuation">(</span>user2<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 1.3.æ‰§è¡Œæ›´æ–°ç¬¬ä¸€ä¸ªçº¿ç¨‹çš„ã€‚å¦‚æœæ²¡æœ‰ä¹è§‚é”å°±ä¼šè¦†ç›–æ’é˜Ÿçº¿ç¨‹çš„æ•°æ®ã€‚</span>
    <span class="token comment">// **å®ç°è‡ªæ—‹é”å®ç°å¤šæ¬¡å°è¯•! JUCè¯¾ç¨‹</span>
	  <span class="token comment">// å¤šçº¿ç¨‹ä¸€å®šè¦åŠ suo**</span>
    userMapper<span class="token punctuation">.</span>updateById<span class="token punctuation">(</span><span class="token keyword">user</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>ç»“æœï¼š1.3æ›´æ–°å¤±è´¥äº†ã€‚</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>Creating a new SqlSession
SqlSession <span class="token punctuation">[</span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span><span class="token keyword">session</span><span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>DefaultSqlSession<span class="token variable">@521bb1a4</span><span class="token punctuation">]</span> was <span class="token operator">not</span> registered <span class="token keyword">for</span> synchronization because synchronization <span class="token operator">is</span> <span class="token operator">not</span> active
<span class="token number">2022</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">04</span> <span class="token number">16</span>:<span class="token number">38</span>:<span class="token number">33.808</span>  INFO <span class="token number">12520</span> <span class="token comment">--- [           main] com.kuang.handler.TimeMetaObjectHandler  : start update fill ...</span>
JDBC Connection <span class="token punctuation">[</span>HikariProxyConnection<span class="token variable">@598284487</span> wrapping com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>ConnectionImpl<span class="token variable">@6deee370</span><span class="token punctuation">]</span> will <span class="token operator">not</span> be managed <span class="token keyword">by</span> Spring
<span class="token operator">=</span><span class="token operator">=</span><span class="token operator">&gt;</span>  Preparing: <span class="token keyword">UPDATE</span> <span class="token keyword">user</span> <span class="token keyword">SET</span> name<span class="token operator">=</span>?<span class="token punctuation">,</span> age<span class="token operator">=</span>?<span class="token punctuation">,</span> email<span class="token operator">=</span>?<span class="token punctuation">,</span> version<span class="token operator">=</span>?<span class="token punctuation">,</span> create_time<span class="token operator">=</span>? <span class="token keyword">WHERE</span> id<span class="token operator">=</span>? <span class="token operator">AND</span> version<span class="token operator">=</span>? 
<span class="token operator">=</span><span class="token operator">=</span><span class="token operator">&gt;</span> Parameters: <span class="token number">123123222222222</span><span class="token punctuation">(</span>String<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">(</span><span class="token keyword">Integer</span><span class="token punctuation">)</span><span class="token punctuation">,</span> test1<span class="token variable">@baomidou.com</span><span class="token punctuation">(</span>String<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">(</span><span class="token keyword">Integer</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2022</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">04</span> <span class="token number">16</span>:<span class="token number">38</span>:<span class="token number">33.808</span><span class="token punctuation">(</span><span class="token keyword">Timestamp</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">(</span><span class="token keyword">Integer</span><span class="token punctuation">)</span>
<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">&lt;=</span><span class="token operator">=</span>    Updates: <span class="token number">1</span><span class="token operator">*</span><span class="token operator">*</span>
Closing non transactional SqlSession <span class="token punctuation">[</span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span><span class="token keyword">session</span><span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>DefaultSqlSession<span class="token variable">@521bb1a4</span><span class="token punctuation">]</span>
Creating a new SqlSession
SqlSession <span class="token punctuation">[</span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span><span class="token keyword">session</span><span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>DefaultSqlSession<span class="token variable">@4b4ee511</span><span class="token punctuation">]</span> was <span class="token operator">not</span> registered <span class="token keyword">for</span> synchronization because synchronization <span class="token operator">is</span> <span class="token operator">not</span> active
<span class="token number">2022</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">04</span> <span class="token number">16</span>:<span class="token number">38</span>:<span class="token number">33.826</span>  INFO <span class="token number">12520</span> <span class="token comment">--- [           main] com.kuang.handler.TimeMetaObjectHandler  : start update fill ...</span>
JDBC Connection <span class="token punctuation">[</span>HikariProxyConnection<span class="token variable">@526874139</span> wrapping com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>ConnectionImpl<span class="token variable">@6deee370</span><span class="token punctuation">]</span> will <span class="token operator">not</span> be managed <span class="token keyword">by</span> Spring
<span class="token operator">=</span><span class="token operator">=</span><span class="token operator">&gt;</span>  Preparing: <span class="token keyword">UPDATE</span> <span class="token keyword">user</span> <span class="token keyword">SET</span> name<span class="token operator">=</span>?<span class="token punctuation">,</span> age<span class="token operator">=</span>?<span class="token punctuation">,</span> email<span class="token operator">=</span>?<span class="token punctuation">,</span> version<span class="token operator">=</span>?<span class="token punctuation">,</span> create_time<span class="token operator">=</span>? <span class="token keyword">WHERE</span> id<span class="token operator">=</span>? <span class="token operator">AND</span> version<span class="token operator">=</span>? 
<span class="token operator">=</span><span class="token operator">=</span><span class="token operator">&gt;</span> Parameters: <span class="token number">123123111111111</span><span class="token punctuation">(</span>String<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">(</span><span class="token keyword">Integer</span><span class="token punctuation">)</span><span class="token punctuation">,</span> test1<span class="token variable">@baomidou.com</span><span class="token punctuation">(</span>String<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">(</span><span class="token keyword">Integer</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2022</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">04</span> <span class="token number">16</span>:<span class="token number">38</span>:<span class="token number">33.826</span><span class="token punctuation">(</span><span class="token keyword">Timestamp</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">(</span><span class="token keyword">Integer</span><span class="token punctuation">)</span>
<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">&lt;=</span><span class="token operator">=</span>    Updates: <span class="token number">0</span><span class="token operator">*</span><span class="token operator">*</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_4-5-æŸ¥è¯¢æ“ä½œ"><a href="#_4-5-æŸ¥è¯¢æ“ä½œ" class="header-anchor">#</a> 4.5 æŸ¥è¯¢æ“ä½œ</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token variable">@Test</span>
void contextLoads6<span class="token punctuation">(</span><span class="token punctuation">)</span> {
    <span class="token comment">// æŸ¥è¯¢å•ä¸ªæ“ä½œ</span>
    <span class="token keyword">User</span> <span class="token keyword">user</span> <span class="token operator">=</span> userMapper<span class="token punctuation">.</span>selectById<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    System<span class="token punctuation">.</span><span class="token keyword">out</span><span class="token punctuation">.</span>println<span class="token punctuation">(</span><span class="token keyword">user</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
}

<span class="token variable">@Test</span>
void contextLoads7<span class="token punctuation">(</span><span class="token punctuation">)</span> {
    <span class="token comment">// æŸ¥è¯¢å¤šä¸ªæ“ä½œ</span>
    <span class="token comment">// SELECT id,name,age,email,version,create_time FROM user WHERE id IN ( ? , ? , ? )</span>
    List<span class="token operator">&lt;</span><span class="token keyword">User</span><span class="token operator">&gt;</span> users <span class="token operator">=</span> userMapper<span class="token punctuation">.</span>selectBatchIds<span class="token punctuation">(</span>Arrays<span class="token punctuation">.</span>asList<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    users<span class="token punctuation">.</span>forEach<span class="token punctuation">(</span>System<span class="token punctuation">.</span><span class="token keyword">out</span>::println<span class="token punctuation">)</span><span class="token punctuation">;</span>
}

<span class="token variable">@Test</span>
void contextLoads8<span class="token punctuation">(</span><span class="token punctuation">)</span> {
    <span class="token comment">// å¤šæ¡ä»¶æŸ¥è¯¢map,**å¤æ‚çš„ä¼šç”¨mapperæ“ä½œ**</span>
    <span class="token comment">// SELECT id,name,age,email,version,create_time FROM user WHERE name = ?</span>
    HashMap<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">&gt;</span> map <span class="token operator">=</span> new HashMap<span class="token operator">&lt;&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span>put<span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Jack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    List<span class="token operator">&lt;</span><span class="token keyword">User</span><span class="token operator">&gt;</span> users <span class="token operator">=</span> userMapper<span class="token punctuation">.</span>selectByMap<span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="_4-6-åˆ†é¡µæŸ¥è¯¢"><a href="#_4-6-åˆ†é¡µæŸ¥è¯¢" class="header-anchor">#</a> 4.6 åˆ†é¡µæŸ¥è¯¢</h3> <aside>
ğŸ’¡ æ–¹å¼ï¼š
1ã€åŸå§‹åˆ†é¡µ
2ã€pagehelperç¬¬ä¸‰æ–¹æ’ä»¶
3ã€mybatispluså†…ç½®äº†åˆ†é¡µæ’ä»¶
</aside> <p>mybatispluså†…ç½®äº†åˆ†é¡µæ’ä»¶ï¼š</p> <p>1ã€é…ç½®æ‹¦æˆªå™¨ç»„ä»¶</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">PaginationInterceptor</span> <span class="token function">paginationInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">PaginationInterceptor</span> paginationInterceptor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PaginationInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è®¾ç½®è¯·æ±‚çš„é¡µé¢å¤§äºæœ€å¤§é¡µåçš„æ“ä½œï¼Œtrueè°ƒå›é¦–é¡µï¼Œfalseç»§ç»­è¯·æ±‚ï¼Œé»˜è®¤false</span>
    paginationInterceptor<span class="token punctuation">.</span><span class="token function">setOverflow</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> paginationInterceptor<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>2ã€ä½¿ç”¨Pageå¯¹è±¡</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">contextLoads9</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// åˆ†é¡µæŸ¥è¯¢,å‚æ•°1ï¼šå½“å‰é¡µï¼Œå‚æ•°2ï¼šé¡µé¢å¤§å°</span>
    <span class="token comment">// SELECT id,name,age,email,version,create_time FROM user LIMIT 10,10</span>
    <span class="token class-name">Page</span> page <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Page</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">IPage</span> selectPage <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectPage</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è¿”å›æ•°æ®</span>
    selectPage<span class="token punctuation">.</span><span class="token function">getRecords</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// æ€»æ•°</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>selectPage<span class="token punctuation">.</span><span class="token function">getTotal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_4-7-åˆ é™¤"><a href="#_4-7-åˆ é™¤" class="header-anchor">#</a> 4.7 åˆ é™¤</h3> <p>åŸºæœ¬åˆ é™¤æ“ä½œï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">contextLoads10</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// åˆ é™¤æ“ä½œ,idåˆ é™¤</span>
    <span class="token comment">//userMapper.deleteById(1478278183120453634L);</span>
    <span class="token comment">// æ‰¹é‡åˆ é™¤,list</span>
    <span class="token comment">//userMapper.deleteBatchIds(Arrays.asList(1478268198860804099L,1478275780337917954L));</span>
    <span class="token comment">// æ¡ä»¶åˆ é™¤</span>
    <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;æµ‹è¯•&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    userMapper<span class="token punctuation">.</span><span class="token function">deleteByMap</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_4-8-é€»è¾‘åˆ é™¤"><a href="#_4-8-é€»è¾‘åˆ é™¤" class="header-anchor">#</a> 4.8 é€»è¾‘åˆ é™¤</h3> <p>å·¥ä½œä¸­å¸¸é‡åˆ°ä¸€äº›é—®é¢˜ã€‚</p> <p>ç‰©ç†åˆ é™¤ï¼šåœ¨æ•°æ®åº“ä¸­ç§»é™¤ã€‚
é€»è¾‘åˆ é™¤ï¼šåœ¨æ•°æ®åº“ä¸­æ²¡æœ‰è¢«ç§»é™¤ï¼Œé€šè¿‡å˜é‡è®©ä»–å¤±æ•ˆã€‚deleted=0 â‡’ deleted=1</p> <p>é˜²æ­¢æ•°æ®çš„åˆ é™¤ï¼Œç±»ä¼¼å›æ”¶ç«™ã€‚</p> <p>1ã€å¢åŠ deletedå­—æ®µ</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>ALTER TABLE `mybatis_plus`<span class="token punctuation">.</span>`user` 
ADD COLUMN `deleted` INT NULL DEFAULT <span class="token number">0</span> AFTER `version`<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>2ã€ä¿®æ”¹å®ä½“ç±»</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@TableLogic</span>
<span class="token keyword">private</span> <span class="token class-name">Integer</span> deleted<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>3ã€é…ç½®</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//é€»è¾‘åˆ é™¤</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">ISqlInjector</span> <span class="token function">sqlInjector</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">LogicSqlInjector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

#é…ç½®é€»è¾‘åˆ é™¤<span class="token punctuation">,</span>åˆ é™¤ä¸º<span class="token number">1</span><span class="token punctuation">,</span>æ²¡åˆ é™¤ä¸º<span class="token number">0</span>
mybatis<span class="token operator">-</span>plus<span class="token punctuation">.</span>global<span class="token operator">-</span>config<span class="token punctuation">.</span>db<span class="token operator">-</span>config<span class="token punctuation">.</span>logic<span class="token operator">-</span>delete<span class="token operator">-</span>value<span class="token operator">=</span><span class="token number">1</span>
mybatis<span class="token operator">-</span>plus<span class="token punctuation">.</span>global<span class="token operator">-</span>config<span class="token punctuation">.</span>db<span class="token operator">-</span>config<span class="token punctuation">.</span>logic<span class="token operator">-</span>not<span class="token operator">-</span>delete<span class="token operator">-</span>value<span class="token operator">=</span><span class="token number">0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>4ã€ä½¿ç”¨åˆ é™¤</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">contextLoads11</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// é€»è¾‘åˆ é™¤,æ‰§è¡Œçš„æ˜¯æ›´æ–°æ“ä½œ</span>
    userMapper<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="/assets/img/Untitled4.c8b592c3.png" alt="Untitled"></p> <p>5ã€æŸ¥è¯¢æ“ä½œä¼šè‡ªåŠ¨è¿‡æ»¤è¢«é€»è¾‘åˆ é™¤çš„å­—æ®µï¼Œæ‹¼æ¥ä¸Šwhere deleted=0</p> <p>ä»¥ä¸Šçš„æ‰€æœ‰CRUDåŠå…¶æ‰©å±•æ“ä½œï¼Œå¿…é¡»ç²¾é€šã€‚ä¼šå¤§å¤§æé«˜å†™é¡¹ç›®çš„æ•ˆç‡ã€‚</p> <h2 id="_5-æ‰©å±•-ä¸»é”®ç”Ÿæˆç­–ç•¥"><a href="#_5-æ‰©å±•-ä¸»é”®ç”Ÿæˆç­–ç•¥" class="header-anchor">#</a> 5 æ‰©å±•ï¼š<strong>ä¸»é”®ç”Ÿæˆç­–ç•¥ï¼š</strong></h2> <p><a href="https://www.cnblogs.com/haoxinyue/p/5208136.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/haoxinyue/p/5208136.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>idå¯¹åº”æ•°æ®åº“ä¸­çš„ä¸»é”®ï¼Œç”Ÿæˆç­–ç•¥ï¼šuuidã€è‡ªå¢idã€é›ªèŠ±ç®—æ³•ã€redisã€zookeeper</p> <p><strong>1. æ•°æ®åº“è‡ªå¢é•¿åºåˆ—æˆ–å­—æ®µ</strong></p> <p>æœ€å¸¸è§çš„æ–¹å¼ã€‚åˆ©ç”¨æ•°æ®åº“ï¼Œå…¨æ•°æ®åº“å”¯ä¸€ã€‚</p> <p>ä¼˜ç‚¹ï¼š</p> <p>1ï¼‰ç®€å•ï¼Œä»£ç æ–¹ä¾¿ï¼Œæ€§èƒ½å¯ä»¥æ¥å—ã€‚</p> <p>2ï¼‰æ•°å­—IDå¤©ç„¶æ’åºï¼Œå¯¹åˆ†é¡µæˆ–è€…éœ€è¦æ’åºçš„ç»“æœå¾ˆæœ‰å¸®åŠ©ã€‚</p> <p>ç¼ºç‚¹ï¼š</p> <p>1ï¼‰ä¸åŒæ•°æ®åº“è¯­æ³•å’Œå®ç°ä¸åŒï¼Œæ•°æ®åº“è¿ç§»çš„æ—¶å€™æˆ–å¤šæ•°æ®åº“ç‰ˆæœ¬æ”¯æŒçš„æ—¶å€™éœ€è¦å¤„ç†ã€‚</p> <p>2ï¼‰åœ¨å•ä¸ªæ•°æ®åº“æˆ–è¯»å†™åˆ†ç¦»æˆ–ä¸€ä¸»å¤šä»çš„æƒ…å†µä¸‹ï¼Œåªæœ‰ä¸€ä¸ªä¸»åº“å¯ä»¥ç”Ÿæˆã€‚æœ‰å•ç‚¹æ•…éšœçš„é£é™©ã€‚</p> <p>3ï¼‰åœ¨æ€§èƒ½è¾¾ä¸åˆ°è¦æ±‚çš„æƒ…å†µä¸‹ï¼Œæ¯”è¾ƒéš¾äºæ‰©å±•ã€‚ï¼ˆä¸é€‚ç”¨äºæµ·é‡é«˜å¹¶å‘ï¼‰</p> <p>4ï¼‰å¦‚æœé‡è§å¤šä¸ªç³»ç»Ÿéœ€è¦åˆå¹¶æˆ–è€…æ¶‰åŠåˆ°æ•°æ®è¿ç§»ä¼šç›¸å½“ç—›è‹¦ã€‚</p> <p>5ï¼‰åˆ†è¡¨åˆ†åº“çš„æ—¶å€™ä¼šæœ‰éº»çƒ¦ã€‚</p> <p>6ï¼‰å¹¶éä¸€å®šè¿ç»­ï¼Œç±»ä¼¼MySQLï¼Œå½“ç”Ÿæˆæ–°IDçš„äº‹åŠ¡å›æ»šï¼Œé‚£ä¹ˆåç»­çš„äº‹åŠ¡ä¹Ÿä¸ä¼šå†ç”¨è¿™ä¸ªIDäº†ã€‚è¿™ä¸ªåœ¨æ€§èƒ½å’Œè¿ç»­æ€§çš„æŠ˜ä¸­ã€‚å¦‚æœä¸ºäº†ä¿è¯è¿ç»­ï¼Œå¿…é¡»è¦åœ¨äº‹åŠ¡ç»“æŸåæ‰èƒ½ç”ŸæˆIDï¼Œé‚£æ€§èƒ½å°±ä¼šå‡ºç°é—®é¢˜ã€‚</p> <p>7ï¼‰åœ¨åˆ†å¸ƒå¼æ•°æ®åº“ä¸­ï¼Œå¦‚æœé‡‡ç”¨äº†è‡ªå¢ä¸»é”®çš„è¯ï¼Œæœ‰å¯èƒ½ä¼šå¸¦æ¥å°¾éƒ¨çƒ­ç‚¹ã€‚åˆ†å¸ƒå¼æ•°æ®åº“å¸¸å¸¸ä½¿ç”¨rangeçš„åˆ†åŒºæ–¹å¼ï¼Œåœ¨å¤§é‡æ–°å¢è®°å½•çš„æ—¶å€™ï¼ŒIOä¼šé›†ä¸­åœ¨ä¸€ä¸ªåˆ†åŒºä¸Šï¼Œé€ æˆçƒ­ç‚¹æ•°æ®ã€‚</p> <p>ä¼˜åŒ–æ–¹æ¡ˆï¼š</p> <p>1ï¼‰é’ˆå¯¹ä¸»åº“å•ç‚¹ï¼Œå¦‚æœæœ‰å¤šä¸ªMasteråº“ï¼Œåˆ™æ¯ä¸ªMasteråº“è®¾ç½®çš„èµ·å§‹æ•°å­—ä¸ä¸€æ ·ï¼Œæ­¥é•¿ä¸€æ ·ï¼Œå¯ä»¥æ˜¯Masterçš„ä¸ªæ•°ã€‚æ¯”å¦‚ï¼šMaster1 ç”Ÿæˆçš„æ˜¯ 1ï¼Œ4ï¼Œ7ï¼Œ10ï¼ŒMaster2ç”Ÿæˆçš„æ˜¯2,5,8,11 Master3ç”Ÿæˆçš„æ˜¯ 3,6,9,12ã€‚è¿™æ ·å°±å¯ä»¥æœ‰æ•ˆç”Ÿæˆé›†ç¾¤ä¸­çš„å”¯ä¸€IDï¼Œä¹Ÿå¯ä»¥å¤§å¤§é™ä½IDç”Ÿæˆæ•°æ®åº“æ“ä½œçš„è´Ÿè½½ã€‚</p> <p><strong>2. UUID</strong></p> <p>å¸¸è§çš„æ–¹å¼ã€‚å¯ä»¥åˆ©ç”¨æ•°æ®åº“ä¹Ÿå¯ä»¥åˆ©ç”¨ç¨‹åºç”Ÿæˆï¼Œä¸€èˆ¬æ¥è¯´å…¨çƒå”¯ä¸€ã€‚UUIDæ˜¯ç”±32ä¸ªçš„16è¿›åˆ¶æ•°å­—ç»„æˆï¼Œæ‰€ä»¥æ¯ä¸ªUUIDçš„é•¿åº¦æ˜¯128ä½ï¼ˆ16^32 = 2^128ï¼‰ã€‚UUIDä½œä¸ºä¸€ç§å¹¿æ³›ä½¿ç”¨æ ‡å‡†ï¼Œæœ‰å¤šä¸ªå®ç°ç‰ˆæœ¬ï¼Œå½±å“å®ƒçš„å› ç´ åŒ…æ‹¬æ—¶é—´ã€ç½‘å¡MACåœ°å€ã€è‡ªå®šä¹‰Namesapceç­‰ç­‰ã€‚</p> <p>ä¼˜ç‚¹ï¼š</p> <p>1ï¼‰ç®€å•ï¼Œä»£ç æ–¹ä¾¿ã€‚</p> <p>2ï¼‰ç”ŸæˆIDæ€§èƒ½éå¸¸å¥½ï¼ŒåŸºæœ¬ä¸ä¼šæœ‰æ€§èƒ½é—®é¢˜ã€‚</p> <p>3ï¼‰å…¨çƒå”¯ä¸€ï¼Œåœ¨é‡è§æ•°æ®è¿ç§»ï¼Œç³»ç»Ÿæ•°æ®åˆå¹¶ï¼Œæˆ–è€…æ•°æ®åº“å˜æ›´ç­‰æƒ…å†µä¸‹ï¼Œå¯ä»¥ä»å®¹åº”å¯¹ã€‚</p> <p>ç¼ºç‚¹ï¼š</p> <p>1ï¼‰æ²¡æœ‰æ’åºï¼Œæ— æ³•ä¿è¯è¶‹åŠ¿é€’å¢ã€‚</p> <p>2ï¼‰UUIDå¾€å¾€æ˜¯ä½¿ç”¨å­—ç¬¦ä¸²å­˜å‚¨ï¼ŒæŸ¥è¯¢çš„æ•ˆç‡æ¯”è¾ƒä½ã€‚</p> <p>3ï¼‰å­˜å‚¨ç©ºé—´æ¯”è¾ƒå¤§ï¼Œå¦‚æœæ˜¯æµ·é‡æ•°æ®åº“ï¼Œå°±éœ€è¦è€ƒè™‘å­˜å‚¨é‡çš„é—®é¢˜ã€‚</p> <p>4ï¼‰ä¼ è¾“æ•°æ®é‡å¤§</p> <p>5ï¼‰ä¸å¯è¯»ã€‚</p> <p>3**. Redisç”ŸæˆID**</p> <p>å½“ä½¿ç”¨æ•°æ®åº“æ¥ç”ŸæˆIDæ€§èƒ½ä¸å¤Ÿè¦æ±‚çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•ä½¿ç”¨Redisæ¥ç”ŸæˆIDã€‚è¿™ä¸»è¦ä¾èµ–äºRedisæ˜¯å•çº¿ç¨‹çš„ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ç”¨ç”Ÿæˆå…¨å±€å”¯ä¸€çš„IDã€‚å¯ä»¥ç”¨Redisçš„åŸå­æ“ä½œ INCRå’ŒINCRBYæ¥å®ç°ã€‚</p> <p>å¯ä»¥ä½¿ç”¨Redisé›†ç¾¤æ¥è·å–æ›´é«˜çš„ååé‡ã€‚å‡å¦‚ä¸€ä¸ªé›†ç¾¤ä¸­æœ‰5å°Redisã€‚å¯ä»¥åˆå§‹åŒ–æ¯å°Redisçš„å€¼åˆ†åˆ«æ˜¯1,2,3,4,5ï¼Œç„¶åæ­¥é•¿éƒ½æ˜¯5ã€‚å„ä¸ªRedisç”Ÿæˆçš„IDä¸ºï¼š</p> <p>Aï¼š1,6,11,16,21</p> <p>Bï¼š2,7,12,17,22</p> <p>Cï¼š3,8,13,18,23</p> <p>Dï¼š4,9,14,19,24</p> <p>Eï¼š5,10,15,20,25</p> <p>è¿™ä¸ªï¼Œéšä¾¿è´Ÿè½½åˆ°å“ªä¸ªæœºç¡®å®šå¥½ï¼Œæœªæ¥å¾ˆéš¾åšä¿®æ”¹ã€‚ä½†æ˜¯3-5å°æœåŠ¡å™¨åŸºæœ¬èƒ½å¤Ÿæ»¡è¶³å™¨ä¸Šï¼Œéƒ½å¯ä»¥è·å¾—ä¸åŒçš„IDã€‚ä½†æ˜¯æ­¥é•¿å’Œåˆå§‹å€¼ä¸€å®šéœ€è¦äº‹å…ˆéœ€è¦äº†ã€‚ä½¿ç”¨Redisé›†ç¾¤ä¹Ÿå¯ä»¥æ–¹å¼å•ç‚¹æ•…éšœçš„é—®é¢˜ã€‚</p> <p>å¦å¤–ï¼Œæ¯”è¾ƒé€‚åˆä½¿ç”¨Redisæ¥ç”Ÿæˆæ¯å¤©ä»0å¼€å§‹çš„æµæ°´å·ã€‚æ¯”å¦‚è®¢å•å·=æ—¥æœŸ+å½“æ—¥è‡ªå¢é•¿å·ã€‚å¯ä»¥æ¯å¤©åœ¨Redisä¸­ç”Ÿæˆä¸€ä¸ªKeyï¼Œä½¿ç”¨INCRè¿›è¡Œç´¯åŠ ã€‚</p> <p>ä¼˜ç‚¹ï¼š</p> <p>1ï¼‰ä¸ä¾èµ–äºæ•°æ®åº“ï¼Œçµæ´»æ–¹ä¾¿ï¼Œä¸”æ€§èƒ½ä¼˜äºæ•°æ®åº“ã€‚</p> <p>2ï¼‰æ•°å­—IDå¤©ç„¶æ’åºï¼Œå¯¹åˆ†é¡µæˆ–è€…éœ€è¦æ’åºçš„ç»“æœå¾ˆæœ‰å¸®åŠ©ã€‚</p> <p>ç¼ºç‚¹ï¼š</p> <p>1ï¼‰å¦‚æœç³»ç»Ÿä¸­æ²¡æœ‰Redisï¼Œè¿˜éœ€è¦å¼•å…¥æ–°çš„ç»„ä»¶ï¼Œå¢åŠ ç³»ç»Ÿå¤æ‚åº¦ã€‚</p> <p>2ï¼‰éœ€è¦ç¼–ç å’Œé…ç½®çš„å·¥ä½œé‡æ¯”è¾ƒå¤§ã€‚</p> <p>4**.é›ªèŠ±ç®—æ³•-Twitterçš„snowflakeç®—æ³•ï¼ˆé‡ç‚¹ï¼‰**</p> <p>snowflakeæ˜¯Twitterå¼€æºçš„åˆ†å¸ƒå¼IDç”Ÿæˆç®—æ³•ï¼Œç»“æœæ˜¯ä¸€ä¸ª<strong>longå‹çš„ID</strong>ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šä½¿ç”¨<strong>41bitä½œä¸ºæ¯«ç§’æ•°</strong>ï¼Œ<strong>10bitä½œä¸ºæœºå™¨çš„ID</strong>ï¼ˆ<strong>5ä¸ªbitæ˜¯æ•°æ®ä¸­å¿ƒ</strong>ï¼Œ<strong>5ä¸ªbitçš„æœºå™¨ID</strong>ï¼‰ï¼Œ<strong>12bitä½œä¸ºæ¯«ç§’å†…çš„æµæ°´å·</strong>ï¼ˆæ„å‘³ç€æ¯ä¸ªèŠ‚ç‚¹åœ¨æ¯æ¯«ç§’å¯ä»¥äº§ç”Ÿ 4096 ä¸ª IDï¼‰ï¼Œ<strong>æœ€åè¿˜æœ‰ä¸€ä¸ªç¬¦å·ä½ï¼Œæ°¸è¿œæ˜¯0</strong>ã€‚å…·ä½“å®ç°çš„ä»£ç å¯ä»¥å‚çœ‹<a href="https://github.com/twitter/snowflake" target="_blank" rel="noopener noreferrer">https://github.com/twitter/snowflake<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚é›ªèŠ±ç®—æ³•æ”¯æŒçš„TPSå¯ä»¥è¾¾åˆ°419ä¸‡å·¦å³ï¼ˆ2^22*1000ï¼‰ã€‚</p> <p>å¯ä»¥ä¿è¯å…¨çƒå”¯ä¸€ã€‚</p> <h2 id="_6-æ€§èƒ½åˆ†ææ’ä»¶"><a href="#_6-æ€§èƒ½åˆ†ææ’ä»¶" class="header-anchor">#</a> 6 æ€§èƒ½åˆ†ææ’ä»¶</h2> <p>æˆ‘ä»¬åœ¨å¹³æ—¶å¼€å‘ä¸­ä¼šé‡åˆ°æ…¢æŸ¥è¯¢ï¼Œæ€ä¹ˆæªå‡ºæ¥ï¼Ÿå¯ä»¥ç”¨druidç­‰ã€‚</p> <p>mybatisplusæä¾›äº†æ€§èƒ½åˆ†ææ’ä»¶ï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªæ—¶é—´å°±åœæ­¢è¿è¡Œã€‚</p> <blockquote><p>æ€§èƒ½åˆ†ææ’ä»¶ç”¨äºè¾“å‡ºæ¯æ¡SQLé¢„è®¡åŠå…¶æ‰§è¡Œæ—¶é—´ã€‚3.2.0ä»¥ä¸Šç‰ˆæœ¬ä¸€å¤„æ¨èä½¿ç”¨ç¬¬ä¸‰æ–¹æ‰©å±•æ‰§è¡ŒSQLåˆ†ææ‰“å°åŠŸèƒ½ã€‚</p></blockquote> <p>1ã€å¯¼å…¥æ’ä»¶</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// æ€§èƒ½åˆ†ææ’ä»¶,åªæœ‰åœ¨devå’Œtestç¯å¢ƒä¸‹å¼€å¯ï¼Œä¸ºäº†ä¿è¯æ•ˆç‡</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@Profile</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;dev&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">PerformanceInterceptor</span> <span class="token function">performanceInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">PerformanceInterceptor</span> performanceInterceptor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PerformanceInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è®¾ç½®sqlèƒ½å¤Ÿæ‰§è¡Œçš„æœ€å¤§æ—¶é—´ï¼Œå¦‚æœè¶…è¿‡äº†åˆ™ä¸æ‰§è¡Œã€‚æ¯”å¦‚ï¼š1ms</span>
    <span class="token comment">// ä¸€èˆ¬è®¾ç½®ä¸º100</span>
    performanceInterceptor<span class="token punctuation">.</span><span class="token function">setMaxTime</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// sqlæ ¼å¼åŒ–</span>
    performanceInterceptor<span class="token punctuation">.</span><span class="token function">setFormat</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> performanceInterceptor<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

#é…ç½®ç¯å¢ƒ
spring<span class="token punctuation">.</span>profiles<span class="token punctuation">.</span>active<span class="token operator">=</span>dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>3ã€æµ‹è¯•ä½¿ç”¨</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>æ‰§è¡Œå¤±è´¥åæ—¥å¿—ï¼š
<span class="token class-name">Time</span>ï¼š<span class="token number">23</span> ms <span class="token operator">-</span> IDï¼š<span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>kuang<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span>UserMapper</span><span class="token punctuation">.</span>selectList
<span class="token class-name">Execute</span> SQLï¼š
    <span class="token class-name">SELECT</span>
        id<span class="token punctuation">,</span>
        name<span class="token punctuation">,</span>
        age<span class="token punctuation">,</span>
        email<span class="token punctuation">,</span>
        version<span class="token punctuation">,</span>
        create_time<span class="token punctuation">,</span>
        deleted 
    FROM
        user 
    <span class="token class-name">WHERE</span>
        deleted<span class="token operator">=</span><span class="token number">0</span>

<span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>spring<span class="token punctuation">.</span></span>MyBatisSystemException</span><span class="token operator">:</span> nested exception is <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>exceptions<span class="token punctuation">.</span></span>PersistenceException</span><span class="token operator">:</span> 
### <span class="token class-name">Error</span> querying <span class="token class-name"><span class="token namespace">database<span class="token punctuation">.</span></span>  Cause</span><span class="token operator">:</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span>exceptions<span class="token punctuation">.</span></span>MybatisPlusException</span><span class="token operator">:</span>  <span class="token class-name">The</span> SQL execution time is too large<span class="token punctuation">,</span> please optimize <span class="token operator">!</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>è¶…è¿‡è§„å®šçš„æ—¶é—´å°±ä¼šæŠ¥å¼‚å¸¸ã€‚</p> <p>ä½¿ç”¨åˆ†ææ’ä»¶å¯ä»¥å¸®åŠ©æˆ‘ä»¬æé«˜sqlæ•ˆç‡ã€‚</p> <h2 id="_7-æ¡ä»¶è¿‡æ»¤å™¨wrapper"><a href="#_7-æ¡ä»¶è¿‡æ»¤å™¨wrapper" class="header-anchor">#</a> 7 æ¡ä»¶è¿‡æ»¤å™¨<strong>Wrapper</strong></h2> <p>æˆ‘ä»¬å†™ä¸€äº›å¤æ‚çš„sqlå¯ä»¥ä½¿ç”¨å®ƒæ›¿ä»£ã€‚</p> <p><a href="https://baomidou.com/pages/10c804/#abstractwrapper" target="_blank" rel="noopener noreferrer">https://baomidou.com/pages/10c804/#abstractwrapper<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * @author éƒ­å®‡èˆª
 * @date 2022/1/4
 * @apiNote
 */</span>
<span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WrapperTest</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
     * åŸºç¡€äº†BaseMapperï¼Œæ‰€æœ‰çš„æ–¹æ³•éƒ½æ¥è‡ªçˆ¶ç±»
     */</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">UserMapper</span> userMapper<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æŸ¥è¯¢å¤æ‚çš„ï¼Œnameä¸ä¸ºç©ºï¼Œé‚®ç®±ä¸ä¸ºç©ºçš„æ•°æ®ï¼Œå¹´é¾„å¤§äºç­‰äº12å²</span>
        <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> wrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ç±»ä¼¼map,mapç›´æ¥putï¼Œè¿™ä¸ªä½¿ç”¨æ–¹æ³•</span>
        wrapper
                <span class="token punctuation">.</span><span class="token function">isNotNull</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">isNotNull</span><span class="token punctuation">(</span><span class="token string">&quot;email&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">ge</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> users <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
        users<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">contextLoads2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æŸ¥è¯¢ä¸€ä¸ªæ•°æ®selectOne,åå­—ä¸ºTom,å¤šä¸ªæ—¶ä½¿ç”¨Listæˆ–Map</span>
        <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> wrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        wrapper<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Tom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectOne</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">contextLoads3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æŸ¥è¯¢å¹´é¾„å†20~30å²ç”¨æˆ·</span>
        <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> wrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        wrapper<span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> count <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectCount</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">contextLoads4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ¨¡ç³ŠæŸ¥è¯¢ï¼Œåå­—ä¸­ä¸åŒ…æ‹¬açš„ã€‚å¹¶ä¸”é‚®ç®±ä»¥tå¼€å¤´çš„æ•°æ®ã€‚</span>
        <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> wrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å·¦å’Œå³ä»£è¡¨%åœ¨å·¦è¿˜æ˜¯å³</span>
        wrapper<span class="token punctuation">.</span><span class="token function">notLike</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">likeRight</span><span class="token punctuation">(</span><span class="token string">&quot;email&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;t&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> maps <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectMaps</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
        maps<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">contextLoads5</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// å†…æŸ¥è¯¢ï¼šidå°äº3</span>
        <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> wrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        wrapper<span class="token punctuation">.</span><span class="token function">inSql</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;select id from user where id &lt; 3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectObjs</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">contextLoads6</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// é™åº</span>
        <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> wrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        wrapper<span class="token punctuation">.</span><span class="token function">orderByDesc</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectObjs</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br></div></div><h2 id="_8-ä»£ç è‡ªåŠ¨ç”Ÿæˆå™¨"><a href="#_8-ä»£ç è‡ªåŠ¨ç”Ÿæˆå™¨" class="header-anchor">#</a> 8 ä»£ç è‡ªåŠ¨ç”Ÿæˆå™¨</h2> <p>AutoGenerator æ˜¯ MyBatis-Plus çš„ä»£ç ç”Ÿæˆå™¨ï¼Œé€šè¿‡ AutoGenerator å¯ä»¥å¿«é€Ÿç”Ÿæˆ Entityã€Mapperã€Mapper XMLã€Serviceã€Controller ç­‰å„ä¸ªæ¨¡å—çš„ä»£ç ï¼Œæå¤§çš„æå‡äº†å¼€å‘æ•ˆç‡ã€‚</p> <p>1ã€å¯¼å…¥ä¾èµ–</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
    <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>com<span class="token punctuation">.</span>baomidou<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>mybatis<span class="token operator">-</span>plus<span class="token operator">-</span>boot<span class="token operator">-</span>starter<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">3.0</span><span class="token number">.5</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
<span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
    <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>com<span class="token punctuation">.</span>baomidou<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>mybatis<span class="token operator">-</span>plus<span class="token operator">-</span>generator<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">3.0</span><span class="token number">.5</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
<span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
    <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>velocity<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>velocity<span class="token operator">-</span>engine<span class="token operator">-</span>core<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">2.3</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>2ã€ç¼–å†™ç”Ÿæˆå™¨</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * @author éƒ­å®‡èˆª
 * @date 2022/1/4
 * @apiNote
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AutoGeneratorTest</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//éœ€è¦ä¸€ä¸ªä»£ç ç”Ÿæˆå™¨å¯¹è±¡</span>
        <span class="token class-name">AutoGenerator</span> mpg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AutoGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// é…ç½®ç­–ç•¥</span>
        <span class="token comment">// 1.å…¨å±€é…ç½®</span>
        <span class="token class-name">GlobalConfig</span> gc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GlobalConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è·å–ç”¨æˆ·ç›®å½•</span>
        <span class="token class-name">String</span> property <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;user.dir&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gc<span class="token punctuation">.</span><span class="token function">setOutputDir</span><span class="token punctuation">(</span>property <span class="token operator">+</span> <span class="token string">&quot;/src/main/java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gc<span class="token punctuation">.</span><span class="token function">setAuthor</span><span class="token punctuation">(</span><span class="token string">&quot;gyh&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ˜¯å¦æ‰“å¼€æ–‡ä»¶ç®¡ç†å™¨</span>
        gc<span class="token punctuation">.</span><span class="token function">setOpen</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ˜¯å¦è¦†ç›–</span>
        gc<span class="token punctuation">.</span><span class="token function">setFileOverride</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å»é™¤serviceçš„Iå‰ç¼€</span>
        gc<span class="token punctuation">.</span><span class="token function">setServiceName</span><span class="token punctuation">(</span><span class="token string">&quot;%sService&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è®¾ç½®idç­–ç•¥</span>
        gc<span class="token punctuation">.</span><span class="token function">setIdType</span><span class="token punctuation">(</span><span class="token class-name">IdType</span><span class="token punctuation">.</span>ID_WORKER<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è®¾ç½®æ—¥æœŸç±»å‹</span>
        gc<span class="token punctuation">.</span><span class="token function">setDateType</span><span class="token punctuation">(</span><span class="token class-name">DateType</span><span class="token punctuation">.</span>ONLY_DATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        gc<span class="token punctuation">.</span><span class="token function">setSwagger2</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mpg<span class="token punctuation">.</span><span class="token function">setGlobalConfig</span><span class="token punctuation">(</span>gc<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// è®¾ç½®æ•°æ®æº</span>
        <span class="token class-name">DataSourceConfig</span> dsc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataSourceConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dsc<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dsc<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">&quot;1234&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dsc<span class="token punctuation">.</span><span class="token function">setUrl</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://localhost:3306/mybatis_plus?useSSL=false&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=GMT%2B8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dsc<span class="token punctuation">.</span><span class="token function">setDriverName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dsc<span class="token punctuation">.</span><span class="token function">setDbType</span><span class="token punctuation">(</span><span class="token class-name">DbType</span><span class="token punctuation">.</span>MYSQL<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mpg<span class="token punctuation">.</span><span class="token function">setDataSource</span><span class="token punctuation">(</span>dsc<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//è®¾ç½®åŒ…</span>
        <span class="token class-name">PackageConfig</span> packageConfig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PackageConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ¨¡å—å</span>
        packageConfig<span class="token punctuation">.</span><span class="token function">setModuleName</span><span class="token punctuation">(</span><span class="token string">&quot;blog&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// çˆ¶åŒ…å</span>
        packageConfig<span class="token punctuation">.</span><span class="token function">setParent</span><span class="token punctuation">(</span><span class="token string">&quot;com.kuang&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        packageConfig<span class="token punctuation">.</span><span class="token function">setEntity</span><span class="token punctuation">(</span><span class="token string">&quot;entity&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        packageConfig<span class="token punctuation">.</span><span class="token function">setMapper</span><span class="token punctuation">(</span><span class="token string">&quot;dao&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        packageConfig<span class="token punctuation">.</span><span class="token function">setService</span><span class="token punctuation">(</span><span class="token string">&quot;service&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        packageConfig<span class="token punctuation">.</span><span class="token function">setController</span><span class="token punctuation">(</span><span class="token string">&quot;controller&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mpg<span class="token punctuation">.</span><span class="token function">setPackageInfo</span><span class="token punctuation">(</span>packageConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//ç­–ç•¥é…ç½®</span>
        <span class="token class-name">StrategyConfig</span> strategyConfig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StrategyConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è®¾ç½®è¦æ˜ å°„çš„è¡¨å</span>
        strategyConfig<span class="token punctuation">.</span><span class="token function">setInclude</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//é€»è¾‘åˆ é™¤</span>
        strategyConfig<span class="token punctuation">.</span><span class="token function">setLogicDeleteFieldName</span><span class="token punctuation">(</span><span class="token string">&quot;deleted&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//é©¼å³°</span>
        strategyConfig<span class="token punctuation">.</span><span class="token function">setNaming</span><span class="token punctuation">(</span><span class="token class-name">NamingStrategy</span><span class="token punctuation">.</span>underline_to_camel<span class="token punctuation">)</span><span class="token punctuation">;</span>
        strategyConfig<span class="token punctuation">.</span><span class="token function">setColumnNaming</span><span class="token punctuation">(</span><span class="token class-name">NamingStrategy</span><span class="token punctuation">.</span>underline_to_camel<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//strategyConfig.setSuperEntityClass(&quot;ä½ è‡ªå·±çˆ¶ç±»çš„å®ä½“ï¼Œæ²¡æœ‰ä¸è¦è®¾ç½®&quot;);</span>
        <span class="token comment">// lombok</span>
        strategyConfig<span class="token punctuation">.</span><span class="token function">setEntityLombokModel</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è‡ªåŠ¨å¡«å……é…ç½®</span>
        <span class="token class-name">TableFill</span> create_time <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TableFill</span><span class="token punctuation">(</span><span class="token string">&quot;create_time&quot;</span><span class="token punctuation">,</span> <span class="token class-name">FieldFill</span><span class="token punctuation">.</span>INSERT<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">TableFill</span> update_time <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TableFill</span><span class="token punctuation">(</span><span class="token string">&quot;update_time&quot;</span><span class="token punctuation">,</span> <span class="token class-name">FieldFill</span><span class="token punctuation">.</span>INSERT_UPDATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        strategyConfig<span class="token punctuation">.</span><span class="token function">setTableFillList</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>create_time<span class="token punctuation">,</span> update_time<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ä¹è§‚é”</span>
        strategyConfig<span class="token punctuation">.</span><span class="token function">setVersionFieldName</span><span class="token punctuation">(</span><span class="token string">&quot;version&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å¼€å¯restfulé©¼å³°æ˜æ˜æ ¼å¼</span>
        strategyConfig<span class="token punctuation">.</span><span class="token function">setRestControllerStyle</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å¼€å¯localhost:8080/hello_id_2æ ¼å¼</span>
        strategyConfig<span class="token punctuation">.</span><span class="token function">setControllerMappingHyphenStyle</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mpg<span class="token punctuation">.</span><span class="token function">setStrategy</span><span class="token punctuation">(</span>strategyConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>

        mpg<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br></div></div><p>ç‹‚ç¥gitä»“å¡:</p> <p><a href="https://gitee.com/kuangstudy/kuang_livenote?_from=gitee_search" target="_blank" rel="noopener noreferrer">https://gitee.com/kuangstudy/kuang_livenote?_from=gitee_search<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">2022/1/16 ä¸‹åˆ5:53:08</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/md/java/learn/Mybatisç¬”è®°.html" class="prev">
        Mybatis
      </a></span> <span class="next"><a href="/md/java/learn/SpringBootç¬”è®°.html">
        SpringBoot
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.7437448f.js" defer></script><script src="/assets/js/5.ea3a467f.js" defer></script><script src="/assets/js/16.de77b749.js" defer></script>
  </body>
</html>
